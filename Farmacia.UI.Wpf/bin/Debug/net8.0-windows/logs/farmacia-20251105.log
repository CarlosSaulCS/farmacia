2025-11-05 10:42:35.843 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 10:42:35.869 -06:00 [INF] Hosting environment: Production
2025-11-05 10:42:35.869 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 10:42:36.514 -06:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 10:42:36.745 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 10:42:36.755 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 10:42:36.758 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 10:42:36.760 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 10:42:36.762 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 10:42:36.764 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 10:42:50.030 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 10:42:50.203 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 10:42:50.212 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 10:42:50.234 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 10:42:50.259 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 10:42:51.609 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__start_0 AND "v"."SaleDate" <= @__end_1
2025-11-05 10:42:51.612 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__start_0 AND "v"."SaleDate" <= @__end_1
2025-11-05 10:42:52.854 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."CreatedAt", "c"."IsActive", "c"."Key", "c"."UpdatedAt", "c"."Value"
FROM "configuracion" AS "c"
WHERE "c"."Key" IN ('General.StoreName', 'General.StoreAddress', 'General.StorePhone', 'General.TicketFooter')
2025-11-05 10:43:05.821 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__start_0 AND "v"."SaleDate" <= @__end_1
2025-11-05 10:43:05.821 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__start_0 AND "v"."SaleDate" <= @__end_1
2025-11-05 10:43:13.211 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Name", "p"."Phone", "p"."BirthDate", "p"."Notes", (
    SELECT "c"."ConsultationDate"
    FROM "consultas" AS "c"
    WHERE "p"."Id" = "c"."PatientId"
    ORDER BY "c"."ConsultationDate" DESC
    LIMIT 1) AS "LastConsultation"
FROM "pacientes" AS "p"
ORDER BY "p"."Name"
LIMIT @__p_0
2025-11-05 10:43:22.082 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 10:43:22.082 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 10:43:22.083 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 10:43:22.085 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 10:43:51.914 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 10:43:59.091 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c0"."Id", "c0"."ConsultationId", "c0"."CreatedAt", "c0"."DoctorId", "c0"."Duration", "c0"."IsActive", "c0"."Notes", "c0"."PatientId", "c0"."Reason", "c0"."ScheduledAt", "c0"."Status", "c0"."UpdatedAt", "p"."Id", "p"."Allergies", "p"."BirthDate", "p"."ChronicConditions", "p"."CreatedAt", "p"."CustomerId", "p"."GeneralData", "p"."IsActive", "p"."Name", "p"."Notes", "p"."Phone", "p"."UpdatedAt", "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM (
    SELECT "c"."Id", "c"."ConsultationId", "c"."CreatedAt", "c"."DoctorId", "c"."Duration", "c"."IsActive", "c"."Notes", "c"."PatientId", "c"."Reason", "c"."ScheduledAt", "c"."Status", "c"."UpdatedAt"
    FROM "citas" AS "c"
    WHERE "c"."ScheduledAt" >= @__start_0 AND "c"."ScheduledAt" <= @__end_1 AND "c"."Status" IN (1, 2, 3)
    ORDER BY "c"."ScheduledAt"
    LIMIT @__p_2
) AS "c0"
INNER JOIN "pacientes" AS "p" ON "c0"."PatientId" = "p"."Id"
INNER JOIN "users" AS "u" ON "c0"."DoctorId" = "u"."Id"
ORDER BY "c0"."ScheduledAt"
2025-11-05 10:44:35.751 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Name", "p"."Phone", "p"."BirthDate", "p"."Notes", (
    SELECT "c"."ConsultationDate"
    FROM "consultas" AS "c"
    WHERE "p"."Id" = "c"."PatientId"
    ORDER BY "c"."ConsultationDate" DESC
    LIMIT 1) AS "LastConsultation"
FROM "pacientes" AS "p"
ORDER BY "p"."Name"
LIMIT @__p_0
2025-11-05 10:51:15.280 -06:00 [INF] Application is shutting down...
2025-11-05 10:52:00.734 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 10:52:00.757 -06:00 [INF] Hosting environment: Production
2025-11-05 10:52:00.757 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 10:52:01.251 -06:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 10:52:01.408 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 10:52:01.415 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 10:52:01.417 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 10:52:01.419 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 10:52:01.421 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 10:52:01.423 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 10:52:13.348 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 10:52:13.481 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 10:52:13.489 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 10:52:13.507 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 10:52:13.531 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 10:52:16.691 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c0"."Id", "c0"."ConsultationId", "c0"."CreatedAt", "c0"."DoctorId", "c0"."Duration", "c0"."IsActive", "c0"."Notes", "c0"."PatientId", "c0"."Reason", "c0"."ScheduledAt", "c0"."Status", "c0"."UpdatedAt", "p"."Id", "p"."Allergies", "p"."BirthDate", "p"."ChronicConditions", "p"."CreatedAt", "p"."CustomerId", "p"."GeneralData", "p"."IsActive", "p"."Name", "p"."Notes", "p"."Phone", "p"."UpdatedAt", "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM (
    SELECT "c"."Id", "c"."ConsultationId", "c"."CreatedAt", "c"."DoctorId", "c"."Duration", "c"."IsActive", "c"."Notes", "c"."PatientId", "c"."Reason", "c"."ScheduledAt", "c"."Status", "c"."UpdatedAt"
    FROM "citas" AS "c"
    WHERE "c"."ScheduledAt" >= @__start_0 AND "c"."ScheduledAt" <= @__end_1 AND "c"."Status" IN (1, 2, 3)
    ORDER BY "c"."ScheduledAt"
    LIMIT @__p_2
) AS "c0"
INNER JOIN "pacientes" AS "p" ON "c0"."PatientId" = "p"."Id"
INNER JOIN "users" AS "u" ON "c0"."DoctorId" = "u"."Id"
ORDER BY "c0"."ScheduledAt"
2025-11-05 10:52:17.656 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Name", "p"."Phone", "p"."BirthDate", "p"."Notes", (
    SELECT "c"."ConsultationDate"
    FROM "consultas" AS "c"
    WHERE "p"."Id" = "c"."PatientId"
    ORDER BY "c"."ConsultationDate" DESC
    LIMIT 1) AS "LastConsultation"
FROM "pacientes" AS "p"
ORDER BY "p"."Name"
LIMIT @__p_0
2025-11-05 10:52:21.049 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__start_0 AND "v"."SaleDate" <= @__end_1
2025-11-05 10:52:21.052 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__start_0 AND "v"."SaleDate" <= @__end_1
2025-11-05 10:52:24.627 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."CreatedAt", "c"."IsActive", "c"."Key", "c"."UpdatedAt", "c"."Value"
FROM "configuracion" AS "c"
WHERE "c"."Key" IN ('General.StoreName', 'General.StoreAddress', 'General.StorePhone', 'General.TicketFooter')
2025-11-05 10:52:25.239 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 10:52:50.959 -06:00 [INF] Application is shutting down...
2025-11-05 10:57:38.134 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 10:57:38.155 -06:00 [INF] Hosting environment: Production
2025-11-05 10:57:38.155 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 10:57:38.605 -06:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 10:57:38.742 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 10:57:38.748 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 10:57:38.750 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 10:57:38.751 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 10:57:38.753 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 10:57:38.755 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 10:57:50.313 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 10:57:50.442 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 10:57:50.451 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 10:57:50.467 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 10:57:50.491 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 10:58:01.032 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 10:58:06.258 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c0"."Id", "c0"."ConsultationId", "c0"."CreatedAt", "c0"."DoctorId", "c0"."Duration", "c0"."IsActive", "c0"."Notes", "c0"."PatientId", "c0"."Reason", "c0"."ScheduledAt", "c0"."Status", "c0"."UpdatedAt", "p"."Id", "p"."Allergies", "p"."BirthDate", "p"."ChronicConditions", "p"."CreatedAt", "p"."CustomerId", "p"."GeneralData", "p"."IsActive", "p"."Name", "p"."Notes", "p"."Phone", "p"."UpdatedAt", "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM (
    SELECT "c"."Id", "c"."ConsultationId", "c"."CreatedAt", "c"."DoctorId", "c"."Duration", "c"."IsActive", "c"."Notes", "c"."PatientId", "c"."Reason", "c"."ScheduledAt", "c"."Status", "c"."UpdatedAt"
    FROM "citas" AS "c"
    WHERE "c"."ScheduledAt" >= @__start_0 AND "c"."ScheduledAt" <= @__end_1 AND "c"."Status" IN (1, 2, 3)
    ORDER BY "c"."ScheduledAt"
    LIMIT @__p_2
) AS "c0"
INNER JOIN "pacientes" AS "p" ON "c0"."PatientId" = "p"."Id"
INNER JOIN "users" AS "u" ON "c0"."DoctorId" = "u"."Id"
ORDER BY "c0"."ScheduledAt"
2025-11-05 10:58:09.814 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Name", "p"."Phone", "p"."BirthDate", "p"."Notes", (
    SELECT "c"."ConsultationDate"
    FROM "consultas" AS "c"
    WHERE "p"."Id" = "c"."PatientId"
    ORDER BY "c"."ConsultationDate" DESC
    LIMIT 1) AS "LastConsultation"
FROM "pacientes" AS "p"
ORDER BY "p"."Name"
LIMIT @__p_0
2025-11-05 10:58:13.068 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."CreatedAt", "c"."IsActive", "c"."Key", "c"."UpdatedAt", "c"."Value"
FROM "configuracion" AS "c"
WHERE "c"."Key" IN ('General.StoreName', 'General.StoreAddress', 'General.StorePhone', 'General.TicketFooter')
2025-11-05 10:58:13.665 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__start_0 AND "v"."SaleDate" <= @__end_1
2025-11-05 10:58:13.668 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__start_0 AND "v"."SaleDate" <= @__end_1
2025-11-05 10:58:14.443 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 10:58:24.233 -06:00 [INF] Application is shutting down...
2025-11-05 11:18:44.534 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 11:18:44.556 -06:00 [INF] Hosting environment: Production
2025-11-05 11:18:44.557 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 11:18:45.554 -06:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 11:18:45.712 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 11:18:45.720 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 11:18:45.722 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 11:18:45.724 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 11:18:45.725 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 11:18:45.727 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 11:18:57.229 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 11:18:57.363 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 11:18:57.371 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 11:18:57.391 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 11:18:57.411 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 11:19:01.941 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 11:23:16.207 -06:00 [INF] Application is shutting down...
2025-11-05 11:24:03.420 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 11:24:03.444 -06:00 [INF] Hosting environment: Production
2025-11-05 11:24:03.445 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 11:24:03.922 -06:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 11:24:04.060 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 11:24:04.066 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 11:24:04.067 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 11:24:04.069 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 11:24:04.072 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 11:24:04.074 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 11:24:13.008 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 11:24:13.130 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 11:24:13.138 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 11:24:13.157 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 11:24:13.178 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 11:24:17.696 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 11:24:44.460 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 11:24:44.460 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 11:24:44.461 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 11:24:44.462 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 11:24:46.796 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 11:24:47.510 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c0"."Id", "c0"."ConsultationId", "c0"."CreatedAt", "c0"."DoctorId", "c0"."Duration", "c0"."IsActive", "c0"."Notes", "c0"."PatientId", "c0"."Reason", "c0"."ScheduledAt", "c0"."Status", "c0"."UpdatedAt", "p"."Id", "p"."Allergies", "p"."BirthDate", "p"."ChronicConditions", "p"."CreatedAt", "p"."CustomerId", "p"."GeneralData", "p"."IsActive", "p"."Name", "p"."Notes", "p"."Phone", "p"."UpdatedAt", "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM (
    SELECT "c"."Id", "c"."ConsultationId", "c"."CreatedAt", "c"."DoctorId", "c"."Duration", "c"."IsActive", "c"."Notes", "c"."PatientId", "c"."Reason", "c"."ScheduledAt", "c"."Status", "c"."UpdatedAt"
    FROM "citas" AS "c"
    WHERE "c"."ScheduledAt" >= @__start_0 AND "c"."ScheduledAt" <= @__end_1 AND "c"."Status" IN (1, 2, 3)
    ORDER BY "c"."ScheduledAt"
    LIMIT @__p_2
) AS "c0"
INNER JOIN "pacientes" AS "p" ON "c0"."PatientId" = "p"."Id"
INNER JOIN "users" AS "u" ON "c0"."DoctorId" = "u"."Id"
ORDER BY "c0"."ScheduledAt"
2025-11-05 11:24:48.734 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Name", "p"."Phone", "p"."BirthDate", "p"."Notes", (
    SELECT "c"."ConsultationDate"
    FROM "consultas" AS "c"
    WHERE "p"."Id" = "c"."PatientId"
    ORDER BY "c"."ConsultationDate" DESC
    LIMIT 1) AS "LastConsultation"
FROM "pacientes" AS "p"
ORDER BY "p"."Name"
LIMIT @__p_0
2025-11-05 11:24:50.872 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__start_0 AND "v"."SaleDate" <= @__end_1
2025-11-05 11:24:50.876 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__start_0 AND "v"."SaleDate" <= @__end_1
2025-11-05 11:24:54.115 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."CreatedAt", "c"."IsActive", "c"."Key", "c"."UpdatedAt", "c"."Value"
FROM "configuracion" AS "c"
WHERE "c"."Key" IN ('General.StoreName', 'General.StoreAddress', 'General.StorePhone', 'General.TicketFooter')
2025-11-05 11:27:52.815 -06:00 [INF] Application is shutting down...
2025-11-05 11:29:06.696 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 11:29:06.718 -06:00 [INF] Hosting environment: Production
2025-11-05 11:29:06.718 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 11:29:07.273 -06:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 11:29:07.471 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 11:29:07.479 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 11:29:07.482 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 11:29:07.484 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 11:29:07.487 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 11:29:07.489 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 11:29:16.250 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 11:29:16.392 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 11:29:16.400 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 11:29:16.416 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 11:29:16.438 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 11:29:18.374 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 11:31:14.404 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."CreatedAt", "c"."IsActive", "c"."Key", "c"."UpdatedAt", "c"."Value"
FROM "configuracion" AS "c"
WHERE "c"."Key" IN ('General.StoreName', 'General.StoreAddress', 'General.StorePhone', 'General.TicketFooter')
2025-11-05 11:31:28.109 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 11:31:47.157 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__SelectedItem_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
FROM "productos" AS "p"
WHERE "p"."Id" = @__SelectedItem_ProductId_0
LIMIT 1
2025-11-05 11:31:47.222 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "productos" SET "TaxRate" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2
RETURNING 1;
2025-11-05 11:31:47.231 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 11:31:49.113 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__SelectedItem_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
FROM "productos" AS "p"
WHERE "p"."Id" = @__SelectedItem_ProductId_0
LIMIT 1
2025-11-05 11:31:49.115 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "productos" SET "UpdatedAt" = @p0
WHERE "Id" = @p1
RETURNING 1;
2025-11-05 11:31:49.121 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 11:31:49.407 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__SelectedItem_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
FROM "productos" AS "p"
WHERE "p"."Id" = @__SelectedItem_ProductId_0
LIMIT 1
2025-11-05 11:31:49.408 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "productos" SET "UpdatedAt" = @p0
WHERE "Id" = @p1
RETURNING 1;
2025-11-05 11:31:49.412 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 11:31:49.614 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__SelectedItem_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
FROM "productos" AS "p"
WHERE "p"."Id" = @__SelectedItem_ProductId_0
LIMIT 1
2025-11-05 11:31:49.615 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "productos" SET "UpdatedAt" = @p0
WHERE "Id" = @p1
RETURNING 1;
2025-11-05 11:31:49.621 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 11:31:50.474 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__SelectedItem_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
FROM "productos" AS "p"
WHERE "p"."Id" = @__SelectedItem_ProductId_0
LIMIT 1
2025-11-05 11:31:50.475 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "productos" SET "UpdatedAt" = @p0
WHERE "Id" = @p1
RETURNING 1;
2025-11-05 11:31:50.480 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 11:31:50.688 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__SelectedItem_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
FROM "productos" AS "p"
WHERE "p"."Id" = @__SelectedItem_ProductId_0
LIMIT 1
2025-11-05 11:31:50.689 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "productos" SET "UpdatedAt" = @p0
WHERE "Id" = @p1
RETURNING 1;
2025-11-05 11:31:50.695 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 11:36:18.627 -06:00 [INF] Application is shutting down...
2025-11-05 11:41:17.681 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 11:41:17.704 -06:00 [INF] Hosting environment: Production
2025-11-05 11:41:17.704 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 11:41:18.209 -06:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 11:41:18.373 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 11:41:18.380 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 11:41:18.382 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 11:41:18.384 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 11:41:18.386 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 11:41:18.388 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 11:41:30.625 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 11:41:30.758 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 11:41:30.766 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 11:41:30.786 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 11:41:30.807 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 11:41:32.406 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 11:44:35.559 -06:00 [INF] Application is shutting down...
2025-11-05 11:53:18.378 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 11:53:18.398 -06:00 [INF] Hosting environment: Production
2025-11-05 11:53:18.399 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 11:53:18.848 -06:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 11:53:18.984 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 11:53:18.990 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 11:53:18.991 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 11:53:18.993 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 11:53:18.994 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 11:53:18.996 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 11:53:27.551 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 11:53:27.657 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 11:53:27.663 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 11:53:27.680 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 11:53:27.698 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 11:53:32.458 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 11:57:39.830 -06:00 [INF] Application is shutting down...
2025-11-05 12:05:47.835 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 12:05:47.854 -06:00 [INF] Hosting environment: Production
2025-11-05 12:05:47.855 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 12:05:48.603 -06:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 12:05:48.736 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 12:05:48.742 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 12:05:48.744 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 12:05:48.745 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 12:05:48.747 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 12:05:48.749 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 12:05:55.696 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 12:05:55.824 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 12:05:55.831 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 12:05:55.850 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 12:05:55.869 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 12:06:09.660 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 12:06:28.382 -06:00 [INF] Application is shutting down...
2025-11-05 12:14:31.061 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 12:14:31.081 -06:00 [INF] Hosting environment: Production
2025-11-05 12:14:31.082 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 12:14:31.513 -06:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 12:14:31.646 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 12:14:31.651 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 12:14:31.653 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 12:14:31.654 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 12:14:31.656 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 12:14:31.657 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 12:14:39.883 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 12:14:40.003 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 12:14:40.009 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 12:14:40.024 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 12:14:40.045 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 12:14:51.274 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 12:14:56.924 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c0"."Id", "c0"."ConsultationId", "c0"."CreatedAt", "c0"."DoctorId", "c0"."Duration", "c0"."IsActive", "c0"."Notes", "c0"."PatientId", "c0"."Reason", "c0"."ScheduledAt", "c0"."Status", "c0"."UpdatedAt", "p"."Id", "p"."Allergies", "p"."BirthDate", "p"."ChronicConditions", "p"."CreatedAt", "p"."CustomerId", "p"."GeneralData", "p"."IsActive", "p"."Name", "p"."Notes", "p"."Phone", "p"."UpdatedAt", "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM (
    SELECT "c"."Id", "c"."ConsultationId", "c"."CreatedAt", "c"."DoctorId", "c"."Duration", "c"."IsActive", "c"."Notes", "c"."PatientId", "c"."Reason", "c"."ScheduledAt", "c"."Status", "c"."UpdatedAt"
    FROM "citas" AS "c"
    WHERE "c"."ScheduledAt" >= @__start_0 AND "c"."ScheduledAt" <= @__end_1 AND "c"."Status" IN (1, 2, 3)
    ORDER BY "c"."ScheduledAt"
    LIMIT @__p_2
) AS "c0"
INNER JOIN "pacientes" AS "p" ON "c0"."PatientId" = "p"."Id"
INNER JOIN "users" AS "u" ON "c0"."DoctorId" = "u"."Id"
ORDER BY "c0"."ScheduledAt"
2025-11-05 12:15:02.800 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Name", "p"."Phone", "p"."BirthDate", "p"."Notes", (
    SELECT "c"."ConsultationDate"
    FROM "consultas" AS "c"
    WHERE "p"."Id" = "c"."PatientId"
    ORDER BY "c"."ConsultationDate" DESC
    LIMIT 1) AS "LastConsultation"
FROM "pacientes" AS "p"
ORDER BY "p"."Name"
LIMIT @__p_0
2025-11-05 12:15:04.923 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__start_0 AND "v"."SaleDate" <= @__end_1
2025-11-05 12:15:04.925 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__start_0 AND "v"."SaleDate" <= @__end_1
2025-11-05 12:15:05.665 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."CreatedAt", "c"."IsActive", "c"."Key", "c"."UpdatedAt", "c"."Value"
FROM "configuracion" AS "c"
WHERE "c"."Key" IN ('General.StoreName', 'General.StoreAddress', 'General.StorePhone', 'General.TicketFooter')
2025-11-05 12:15:06.144 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__start_0 AND "v"."SaleDate" <= @__end_1
2025-11-05 12:15:06.144 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__start_0 AND "v"."SaleDate" <= @__end_1
2025-11-05 12:15:06.838 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Name", "p"."Phone", "p"."BirthDate", "p"."Notes", (
    SELECT "c"."ConsultationDate"
    FROM "consultas" AS "c"
    WHERE "p"."Id" = "c"."PatientId"
    ORDER BY "c"."ConsultationDate" DESC
    LIMIT 1) AS "LastConsultation"
FROM "pacientes" AS "p"
ORDER BY "p"."Name"
LIMIT @__p_0
2025-11-05 12:15:07.597 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c0"."Id", "c0"."ConsultationId", "c0"."CreatedAt", "c0"."DoctorId", "c0"."Duration", "c0"."IsActive", "c0"."Notes", "c0"."PatientId", "c0"."Reason", "c0"."ScheduledAt", "c0"."Status", "c0"."UpdatedAt", "p"."Id", "p"."Allergies", "p"."BirthDate", "p"."ChronicConditions", "p"."CreatedAt", "p"."CustomerId", "p"."GeneralData", "p"."IsActive", "p"."Name", "p"."Notes", "p"."Phone", "p"."UpdatedAt", "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM (
    SELECT "c"."Id", "c"."ConsultationId", "c"."CreatedAt", "c"."DoctorId", "c"."Duration", "c"."IsActive", "c"."Notes", "c"."PatientId", "c"."Reason", "c"."ScheduledAt", "c"."Status", "c"."UpdatedAt"
    FROM "citas" AS "c"
    WHERE "c"."ScheduledAt" >= @__start_0 AND "c"."ScheduledAt" <= @__end_1 AND "c"."Status" IN (1, 2, 3)
    ORDER BY "c"."ScheduledAt"
    LIMIT @__p_2
) AS "c0"
INNER JOIN "pacientes" AS "p" ON "c0"."PatientId" = "p"."Id"
INNER JOIN "users" AS "u" ON "c0"."DoctorId" = "u"."Id"
ORDER BY "c0"."ScheduledAt"
2025-11-05 12:15:43.699 -06:00 [INF] Application is shutting down...
2025-11-05 12:15:53.995 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 12:15:54.019 -06:00 [INF] Hosting environment: Production
2025-11-05 12:15:54.020 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 12:15:54.598 -06:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 12:15:54.806 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 12:15:54.817 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 12:15:54.819 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 12:15:54.822 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 12:15:54.824 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 12:15:54.827 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 12:16:04.886 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 12:16:05.001 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 12:16:05.007 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 12:16:05.022 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 12:16:05.043 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 12:16:06.687 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Name", "p"."Phone", "p"."BirthDate", "p"."Notes", (
    SELECT "c"."ConsultationDate"
    FROM "consultas" AS "c"
    WHERE "p"."Id" = "c"."PatientId"
    ORDER BY "c"."ConsultationDate" DESC
    LIMIT 1) AS "LastConsultation"
FROM "pacientes" AS "p"
ORDER BY "p"."Name"
LIMIT @__p_0
2025-11-05 12:16:07.849 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__start_0 AND "v"."SaleDate" <= @__end_1
2025-11-05 12:16:07.851 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__start_0 AND "v"."SaleDate" <= @__end_1
2025-11-05 12:16:10.136 -06:00 [INF] Application is shutting down...
2025-11-05 12:26:57.276 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 12:26:57.313 -06:00 [INF] Hosting environment: Production
2025-11-05 12:26:57.314 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 12:26:57.809 -06:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 12:26:57.963 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 12:26:57.969 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 12:26:57.970 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 12:26:57.972 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 12:26:57.974 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 12:26:57.976 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 12:27:05.955 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 12:27:06.074 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 12:27:06.083 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 12:27:06.102 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 12:27:06.126 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 12:27:07.759 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__start_0 AND "v"."SaleDate" <= @__end_1
2025-11-05 12:27:07.761 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__start_0 AND "v"."SaleDate" <= @__end_1
2025-11-05 12:27:11.100 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."CreatedAt", "c"."IsActive", "c"."Key", "c"."UpdatedAt", "c"."Value"
FROM "configuracion" AS "c"
WHERE "c"."Key" IN ('General.StoreName', 'General.StoreAddress', 'General.StorePhone', 'General.TicketFooter')
2025-11-05 12:27:18.380 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 12:27:20.222 -06:00 [INF] Application is shutting down...
2025-11-05 12:32:24.227 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 12:32:24.246 -06:00 [INF] Hosting environment: Production
2025-11-05 12:32:24.246 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 12:32:24.688 -06:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 12:32:24.831 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 12:32:24.837 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 12:32:24.839 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 12:32:24.840 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 12:32:24.842 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 12:32:24.844 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 12:32:33.157 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 12:32:33.274 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 12:32:33.281 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 12:32:33.296 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 12:32:33.317 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 12:32:36.212 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 12:32:51.888 -06:00 [INF] Application is shutting down...
2025-11-05 12:35:00.925 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 12:35:00.947 -06:00 [INF] Hosting environment: Production
2025-11-05 12:35:00.947 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 12:35:01.405 -06:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 12:35:01.545 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 12:35:01.552 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 12:35:01.554 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 12:35:01.556 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 12:35:01.557 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 12:35:01.559 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 12:35:26.288 -06:00 [INF] Application is shutting down...
2025-11-05 12:37:48.209 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 12:37:48.229 -06:00 [INF] Hosting environment: Production
2025-11-05 12:37:48.229 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 12:37:48.689 -06:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 12:37:48.829 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 12:37:48.835 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 12:37:48.836 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 12:37:48.838 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 12:37:48.839 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 12:37:48.841 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 12:39:28.709 -06:00 [INF] Application is shutting down...
2025-11-05 12:41:45.155 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 12:41:45.176 -06:00 [INF] Hosting environment: Production
2025-11-05 12:41:45.177 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 12:41:45.619 -06:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 12:41:45.758 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 12:41:45.765 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 12:41:45.766 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 12:41:45.768 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 12:41:45.770 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 12:41:45.771 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 12:45:16.919 -06:00 [INF] Application is shutting down...
2025-11-05 12:45:30.631 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 12:45:30.653 -06:00 [INF] Hosting environment: Production
2025-11-05 12:45:30.653 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 12:45:31.159 -06:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 12:45:31.304 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 12:45:31.310 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 12:45:31.312 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 12:45:31.314 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 12:45:31.316 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 12:45:31.318 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 12:46:15.169 -06:00 [INF] Application is shutting down...
2025-11-05 12:49:29.452 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 12:49:29.473 -06:00 [INF] Hosting environment: Production
2025-11-05 12:49:29.473 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 12:49:29.888 -06:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 12:49:30.016 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 12:49:30.022 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 12:49:30.023 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 12:49:30.025 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 12:49:30.026 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 12:49:30.028 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 12:49:49.601 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 12:49:49.716 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 12:49:49.726 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 12:49:49.742 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 12:49:49.760 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 12:49:53.707 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 12:49:54.394 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c0"."Id", "c0"."ConsultationId", "c0"."CreatedAt", "c0"."DoctorId", "c0"."Duration", "c0"."IsActive", "c0"."Notes", "c0"."PatientId", "c0"."Reason", "c0"."ScheduledAt", "c0"."Status", "c0"."UpdatedAt", "p"."Id", "p"."Allergies", "p"."BirthDate", "p"."ChronicConditions", "p"."CreatedAt", "p"."CustomerId", "p"."GeneralData", "p"."IsActive", "p"."Name", "p"."Notes", "p"."Phone", "p"."UpdatedAt", "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM (
    SELECT "c"."Id", "c"."ConsultationId", "c"."CreatedAt", "c"."DoctorId", "c"."Duration", "c"."IsActive", "c"."Notes", "c"."PatientId", "c"."Reason", "c"."ScheduledAt", "c"."Status", "c"."UpdatedAt"
    FROM "citas" AS "c"
    WHERE "c"."ScheduledAt" >= @__start_0 AND "c"."ScheduledAt" <= @__end_1 AND "c"."Status" IN (1, 2, 3)
    ORDER BY "c"."ScheduledAt"
    LIMIT @__p_2
) AS "c0"
INNER JOIN "pacientes" AS "p" ON "c0"."PatientId" = "p"."Id"
INNER JOIN "users" AS "u" ON "c0"."DoctorId" = "u"."Id"
ORDER BY "c0"."ScheduledAt"
2025-11-05 12:49:56.641 -06:00 [INF] Application is shutting down...
2025-11-05 12:55:02.568 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 12:55:02.588 -06:00 [INF] Hosting environment: Production
2025-11-05 12:55:02.589 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 12:55:03.030 -06:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 12:55:03.163 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 12:55:03.169 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 12:55:03.171 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 12:55:03.172 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 12:55:03.174 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 12:55:03.175 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 12:55:11.635 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 12:55:11.751 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 12:55:11.759 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 12:55:11.778 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 12:55:11.798 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 12:55:13.301 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 12:55:39.452 -06:00 [INF] Application is shutting down...
2025-11-05 13:05:42.237 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 13:05:42.257 -06:00 [INF] Hosting environment: Production
2025-11-05 13:05:42.257 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 13:05:42.691 -06:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 13:05:42.824 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 13:05:42.830 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 13:05:42.832 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 13:05:42.834 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 13:05:42.835 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 13:05:42.837 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 13:05:58.516 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 13:05:58.631 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 13:05:58.638 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 13:05:58.655 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 13:05:58.672 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 13:06:00.735 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 13:06:20.233 -06:00 [INF] Application is shutting down...
2025-11-05 13:09:34.945 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 13:09:34.965 -06:00 [INF] Hosting environment: Production
2025-11-05 13:09:34.965 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 13:09:35.423 -06:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 13:09:35.559 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 13:09:35.566 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 13:09:35.567 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 13:09:35.569 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 13:09:35.571 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 13:09:35.573 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 13:09:48.901 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 13:09:49.019 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 13:09:49.025 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 13:09:49.043 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 13:09:49.060 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 13:09:50.616 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 13:10:55.374 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c0"."Id", "c0"."ConsultationId", "c0"."CreatedAt", "c0"."DoctorId", "c0"."Duration", "c0"."IsActive", "c0"."Notes", "c0"."PatientId", "c0"."Reason", "c0"."ScheduledAt", "c0"."Status", "c0"."UpdatedAt", "p"."Id", "p"."Allergies", "p"."BirthDate", "p"."ChronicConditions", "p"."CreatedAt", "p"."CustomerId", "p"."GeneralData", "p"."IsActive", "p"."Name", "p"."Notes", "p"."Phone", "p"."UpdatedAt", "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM (
    SELECT "c"."Id", "c"."ConsultationId", "c"."CreatedAt", "c"."DoctorId", "c"."Duration", "c"."IsActive", "c"."Notes", "c"."PatientId", "c"."Reason", "c"."ScheduledAt", "c"."Status", "c"."UpdatedAt"
    FROM "citas" AS "c"
    WHERE "c"."ScheduledAt" >= @__start_0 AND "c"."ScheduledAt" <= @__end_1 AND "c"."Status" IN (1, 2, 3)
    ORDER BY "c"."ScheduledAt"
    LIMIT @__p_2
) AS "c0"
INNER JOIN "pacientes" AS "p" ON "c0"."PatientId" = "p"."Id"
INNER JOIN "users" AS "u" ON "c0"."DoctorId" = "u"."Id"
ORDER BY "c0"."ScheduledAt"
2025-11-05 13:10:57.560 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 13:11:01.933 -06:00 [INF] Application is shutting down...
2025-11-05 13:13:36.675 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 13:13:36.701 -06:00 [INF] Hosting environment: Production
2025-11-05 13:13:36.702 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 13:13:37.244 -06:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 13:13:37.439 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 13:13:37.446 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 13:13:37.448 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 13:13:37.450 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 13:13:37.452 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 13:13:37.453 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 13:13:48.249 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 13:13:48.366 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 13:13:48.372 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 13:13:48.390 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 13:13:48.408 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 13:13:51.191 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 13:15:58.977 -06:00 [INF] Application is shutting down...
2025-11-05 13:24:41.089 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 13:24:41.110 -06:00 [INF] Hosting environment: Production
2025-11-05 13:24:41.110 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 13:24:41.715 -06:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 13:24:41.908 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 13:24:41.918 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 13:24:41.921 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 13:24:41.923 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 13:24:41.925 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 13:24:41.927 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 13:24:54.956 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 13:24:55.073 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 13:24:55.080 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 13:24:55.094 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 13:24:55.115 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 13:24:56.570 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 13:25:28.413 -06:00 [INF] Application is shutting down...
2025-11-05 13:36:37.895 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 13:36:37.915 -06:00 [INF] Hosting environment: Production
2025-11-05 13:36:37.916 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 13:36:38.361 -06:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 13:36:38.493 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 13:36:38.499 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 13:36:38.501 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 13:36:38.502 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 13:36:38.504 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 13:36:38.506 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 13:36:47.311 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 13:36:47.432 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 13:36:47.438 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 13:36:47.456 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 13:36:47.474 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 13:36:49.524 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 13:37:37.476 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 13:37:38.111 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c0"."Id", "c0"."ConsultationId", "c0"."CreatedAt", "c0"."DoctorId", "c0"."Duration", "c0"."IsActive", "c0"."Notes", "c0"."PatientId", "c0"."Reason", "c0"."ScheduledAt", "c0"."Status", "c0"."UpdatedAt", "p"."Id", "p"."Allergies", "p"."BirthDate", "p"."ChronicConditions", "p"."CreatedAt", "p"."CustomerId", "p"."GeneralData", "p"."IsActive", "p"."Name", "p"."Notes", "p"."Phone", "p"."UpdatedAt", "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM (
    SELECT "c"."Id", "c"."ConsultationId", "c"."CreatedAt", "c"."DoctorId", "c"."Duration", "c"."IsActive", "c"."Notes", "c"."PatientId", "c"."Reason", "c"."ScheduledAt", "c"."Status", "c"."UpdatedAt"
    FROM "citas" AS "c"
    WHERE "c"."ScheduledAt" >= @__start_0 AND "c"."ScheduledAt" <= @__end_1 AND "c"."Status" IN (1, 2, 3)
    ORDER BY "c"."ScheduledAt"
    LIMIT @__p_2
) AS "c0"
INNER JOIN "pacientes" AS "p" ON "c0"."PatientId" = "p"."Id"
INNER JOIN "users" AS "u" ON "c0"."DoctorId" = "u"."Id"
ORDER BY "c0"."ScheduledAt"
2025-11-05 13:37:38.892 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__start_0 AND "v"."SaleDate" <= @__end_1
2025-11-05 13:37:38.894 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__start_0 AND "v"."SaleDate" <= @__end_1
2025-11-05 13:37:43.022 -06:00 [INF] Application is shutting down...
2025-11-05 13:46:39.260 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 13:46:39.284 -06:00 [INF] Hosting environment: Production
2025-11-05 13:46:39.285 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 13:46:39.784 -06:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 13:46:39.931 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 13:46:39.938 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 13:46:39.940 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 13:46:39.942 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 13:46:39.944 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 13:46:39.945 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 13:46:53.098 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 13:46:53.216 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 13:46:53.224 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 13:46:53.243 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 13:46:53.262 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 13:46:55.433 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 13:47:32.782 -06:00 [INF] Application is shutting down...
2025-11-05 13:49:59.485 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 13:49:59.506 -06:00 [INF] Hosting environment: Production
2025-11-05 13:49:59.506 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 13:49:59.945 -06:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 13:50:00.079 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 13:50:00.085 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 13:50:00.087 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 13:50:00.090 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 13:50:00.093 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 13:50:00.096 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 13:50:08.183 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 13:50:08.303 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 13:50:08.311 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 13:50:08.330 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 13:50:08.350 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 13:50:22.028 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 13:50:36.861 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__SelectedItem_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
FROM "productos" AS "p"
WHERE "p"."Id" = @__SelectedItem_ProductId_0
LIMIT 1
2025-11-05 13:50:36.914 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "productos" SET "UpdatedAt" = @p0
WHERE "Id" = @p1
RETURNING 1;
2025-11-05 13:50:36.924 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 13:50:37.438 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__SelectedItem_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
FROM "productos" AS "p"
WHERE "p"."Id" = @__SelectedItem_ProductId_0
LIMIT 1
2025-11-05 13:50:37.439 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "productos" SET "UpdatedAt" = @p0
WHERE "Id" = @p1
RETURNING 1;
2025-11-05 13:50:37.444 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 13:50:37.660 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__SelectedItem_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
FROM "productos" AS "p"
WHERE "p"."Id" = @__SelectedItem_ProductId_0
LIMIT 1
2025-11-05 13:50:37.660 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "productos" SET "UpdatedAt" = @p0
WHERE "Id" = @p1
RETURNING 1;
2025-11-05 13:50:37.667 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 13:50:41.927 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__SelectedItem_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
FROM "productos" AS "p"
WHERE "p"."Id" = @__SelectedItem_ProductId_0
LIMIT 1
2025-11-05 13:50:41.928 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "productos" SET "Cost" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2
RETURNING 1;
2025-11-05 13:50:41.934 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 13:50:42.481 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__SelectedItem_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
FROM "productos" AS "p"
WHERE "p"."Id" = @__SelectedItem_ProductId_0
LIMIT 1
2025-11-05 13:50:42.481 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "productos" SET "UpdatedAt" = @p0
WHERE "Id" = @p1
RETURNING 1;
2025-11-05 13:50:42.485 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 13:50:42.687 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__SelectedItem_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
FROM "productos" AS "p"
WHERE "p"."Id" = @__SelectedItem_ProductId_0
LIMIT 1
2025-11-05 13:50:42.687 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "productos" SET "UpdatedAt" = @p0
WHERE "Id" = @p1
RETURNING 1;
2025-11-05 13:50:42.691 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 13:50:42.878 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__SelectedItem_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
FROM "productos" AS "p"
WHERE "p"."Id" = @__SelectedItem_ProductId_0
LIMIT 1
2025-11-05 13:50:42.878 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "productos" SET "UpdatedAt" = @p0
WHERE "Id" = @p1
RETURNING 1;
2025-11-05 13:50:42.883 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 13:50:43.064 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__SelectedItem_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
FROM "productos" AS "p"
WHERE "p"."Id" = @__SelectedItem_ProductId_0
LIMIT 1
2025-11-05 13:50:43.064 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "productos" SET "UpdatedAt" = @p0
WHERE "Id" = @p1
RETURNING 1;
2025-11-05 13:50:43.069 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 13:50:43.236 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__SelectedItem_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
FROM "productos" AS "p"
WHERE "p"."Id" = @__SelectedItem_ProductId_0
LIMIT 1
2025-11-05 13:50:43.237 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "productos" SET "UpdatedAt" = @p0
WHERE "Id" = @p1
RETURNING 1;
2025-11-05 13:50:43.240 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 13:51:02.830 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__SelectedItem_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
FROM "productos" AS "p"
WHERE "p"."Id" = @__SelectedItem_ProductId_0
LIMIT 1
2025-11-05 13:51:02.831 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "productos" SET "StockMinimum" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2
RETURNING 1;
2025-11-05 13:51:02.836 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 13:51:14.898 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__SelectedItem_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
FROM "productos" AS "p"
WHERE "p"."Id" = @__SelectedItem_ProductId_0
LIMIT 1
2025-11-05 13:51:14.899 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "productos" SET "StockMinimum" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2
RETURNING 1;
2025-11-05 13:51:14.907 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 13:51:48.709 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?', @p1='?' (DbType = Decimal), @p2='?' (DbType = DateTime), @p3='?', @p4='?', @p5='?' (DbType = Boolean), @p6='?', @p7='?' (Size = 11), @p8='?', @p9='?' (DbType = Decimal), @p10='?' (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (DbType = Decimal), @p13='?' (DbType = DateTime), @p14='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "productos" ("Barcode", "Cost", "CreatedAt", "Description", "InternalCode", "IsActive", "Location", "Name", "Presentation", "Price", "StockMinimum", "SupplierId", "TaxRate", "UpdatedAt", "UsesBatches")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14)
RETURNING "Id";
2025-11-05 13:51:48.727 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__term_0='?' (Size = 11), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    WHERE instr("p"."Name", @__term_0) > 0 OR ("p"."Barcode" IS NOT NULL AND instr("p"."Barcode", @__term_0) > 0) OR ("p"."InternalCode" IS NOT NULL AND instr("p"."InternalCode", @__term_0) > 0)
    ORDER BY "p"."Name"
    LIMIT @__p_1
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 13:52:14.142 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c0"."Id", "c0"."ConsultationId", "c0"."CreatedAt", "c0"."DoctorId", "c0"."Duration", "c0"."IsActive", "c0"."Notes", "c0"."PatientId", "c0"."Reason", "c0"."ScheduledAt", "c0"."Status", "c0"."UpdatedAt", "p"."Id", "p"."Allergies", "p"."BirthDate", "p"."ChronicConditions", "p"."CreatedAt", "p"."CustomerId", "p"."GeneralData", "p"."IsActive", "p"."Name", "p"."Notes", "p"."Phone", "p"."UpdatedAt", "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM (
    SELECT "c"."Id", "c"."ConsultationId", "c"."CreatedAt", "c"."DoctorId", "c"."Duration", "c"."IsActive", "c"."Notes", "c"."PatientId", "c"."Reason", "c"."ScheduledAt", "c"."Status", "c"."UpdatedAt"
    FROM "citas" AS "c"
    WHERE "c"."ScheduledAt" >= @__start_0 AND "c"."ScheduledAt" <= @__end_1 AND "c"."Status" IN (1, 2, 3)
    ORDER BY "c"."ScheduledAt"
    LIMIT @__p_2
) AS "c0"
INNER JOIN "pacientes" AS "p" ON "c0"."PatientId" = "p"."Id"
INNER JOIN "users" AS "u" ON "c0"."DoctorId" = "u"."Id"
ORDER BY "c0"."ScheduledAt"
2025-11-05 13:52:30.423 -06:00 [INF] Application is shutting down...
2025-11-05 14:02:34.395 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 14:02:34.423 -06:00 [INF] Hosting environment: Production
2025-11-05 14:02:34.423 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 14:02:34.965 -06:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 14:02:35.152 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 14:02:35.163 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 14:02:35.166 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 14:02:35.168 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 14:02:35.170 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 14:02:35.171 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 14:02:47.387 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 14:02:47.513 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 14:02:47.520 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 14:02:47.540 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 14:02:47.560 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 14:02:56.061 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 14:03:01.672 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c0"."Id", "c0"."ConsultationId", "c0"."CreatedAt", "c0"."DoctorId", "c0"."Duration", "c0"."IsActive", "c0"."Notes", "c0"."PatientId", "c0"."Reason", "c0"."ScheduledAt", "c0"."Status", "c0"."UpdatedAt", "p"."Id", "p"."Allergies", "p"."BirthDate", "p"."ChronicConditions", "p"."CreatedAt", "p"."CustomerId", "p"."GeneralData", "p"."IsActive", "p"."Name", "p"."Notes", "p"."Phone", "p"."UpdatedAt", "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM (
    SELECT "c"."Id", "c"."ConsultationId", "c"."CreatedAt", "c"."DoctorId", "c"."Duration", "c"."IsActive", "c"."Notes", "c"."PatientId", "c"."Reason", "c"."ScheduledAt", "c"."Status", "c"."UpdatedAt"
    FROM "citas" AS "c"
    WHERE "c"."ScheduledAt" >= @__start_0 AND "c"."ScheduledAt" <= @__end_1 AND "c"."Status" IN (1, 2, 3)
    ORDER BY "c"."ScheduledAt"
    LIMIT @__p_2
) AS "c0"
INNER JOIN "pacientes" AS "p" ON "c0"."PatientId" = "p"."Id"
INNER JOIN "users" AS "u" ON "c0"."DoctorId" = "u"."Id"
ORDER BY "c0"."ScheduledAt"
2025-11-05 14:03:09.181 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Name", "p"."Phone", "p"."BirthDate", "p"."Notes", (
    SELECT "c"."ConsultationDate"
    FROM "consultas" AS "c"
    WHERE "p"."Id" = "c"."PatientId"
    ORDER BY "c"."ConsultationDate" DESC
    LIMIT 1) AS "LastConsultation"
FROM "pacientes" AS "p"
ORDER BY "p"."Name"
LIMIT @__p_0
2025-11-05 14:03:11.425 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__start_0 AND "v"."SaleDate" <= @__end_1
2025-11-05 14:03:11.427 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__start_0 AND "v"."SaleDate" <= @__end_1
2025-11-05 14:03:12.117 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."CreatedAt", "c"."IsActive", "c"."Key", "c"."UpdatedAt", "c"."Value"
FROM "configuracion" AS "c"
WHERE "c"."Key" IN ('General.StoreName', 'General.StoreAddress', 'General.StorePhone', 'General.TicketFooter')
2025-11-05 14:03:15.649 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__start_0 AND "v"."SaleDate" <= @__end_1
2025-11-05 14:03:15.649 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__start_0 AND "v"."SaleDate" <= @__end_1
2025-11-05 14:03:18.676 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Name", "p"."Phone", "p"."BirthDate", "p"."Notes", (
    SELECT "c"."ConsultationDate"
    FROM "consultas" AS "c"
    WHERE "p"."Id" = "c"."PatientId"
    ORDER BY "c"."ConsultationDate" DESC
    LIMIT 1) AS "LastConsultation"
FROM "pacientes" AS "p"
ORDER BY "p"."Name"
LIMIT @__p_0
2025-11-05 14:03:30.219 -06:00 [INF] Application is shutting down...
2025-11-05 14:15:57.203 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 14:15:57.234 -06:00 [INF] Hosting environment: Production
2025-11-05 14:15:57.235 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 14:15:57.807 -06:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 14:15:57.974 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 14:15:57.981 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 14:15:57.983 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 14:15:57.984 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 14:15:57.986 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 14:15:57.988 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 14:16:05.889 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 14:16:06.007 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 14:16:06.013 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 14:16:06.027 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 14:16:06.048 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 14:16:12.476 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 14:16:20.072 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c0"."Id", "c0"."ConsultationId", "c0"."CreatedAt", "c0"."DoctorId", "c0"."Duration", "c0"."IsActive", "c0"."Notes", "c0"."PatientId", "c0"."Reason", "c0"."ScheduledAt", "c0"."Status", "c0"."UpdatedAt", "p"."Id", "p"."Allergies", "p"."BirthDate", "p"."ChronicConditions", "p"."CreatedAt", "p"."CustomerId", "p"."GeneralData", "p"."IsActive", "p"."Name", "p"."Notes", "p"."Phone", "p"."UpdatedAt", "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM (
    SELECT "c"."Id", "c"."ConsultationId", "c"."CreatedAt", "c"."DoctorId", "c"."Duration", "c"."IsActive", "c"."Notes", "c"."PatientId", "c"."Reason", "c"."ScheduledAt", "c"."Status", "c"."UpdatedAt"
    FROM "citas" AS "c"
    WHERE "c"."ScheduledAt" >= @__start_0 AND "c"."ScheduledAt" <= @__end_1 AND "c"."Status" IN (1, 2, 3)
    ORDER BY "c"."ScheduledAt"
    LIMIT @__p_2
) AS "c0"
INNER JOIN "pacientes" AS "p" ON "c0"."PatientId" = "p"."Id"
INNER JOIN "users" AS "u" ON "c0"."DoctorId" = "u"."Id"
ORDER BY "c0"."ScheduledAt"
2025-11-05 14:16:28.055 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Name", "p"."Phone", "p"."BirthDate", "p"."Notes", (
    SELECT "c"."ConsultationDate"
    FROM "consultas" AS "c"
    WHERE "p"."Id" = "c"."PatientId"
    ORDER BY "c"."ConsultationDate" DESC
    LIMIT 1) AS "LastConsultation"
FROM "pacientes" AS "p"
ORDER BY "p"."Name"
LIMIT @__p_0
2025-11-05 14:16:30.253 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__start_0 AND "v"."SaleDate" <= @__end_1
2025-11-05 14:16:30.255 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__start_0 AND "v"."SaleDate" <= @__end_1
2025-11-05 14:16:32.882 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."CreatedAt", "c"."IsActive", "c"."Key", "c"."UpdatedAt", "c"."Value"
FROM "configuracion" AS "c"
WHERE "c"."Key" IN ('General.StoreName', 'General.StoreAddress', 'General.StorePhone', 'General.TicketFooter')
2025-11-05 14:16:38.557 -06:00 [INF] Application is shutting down...
2025-11-05 14:21:15.492 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 14:21:15.510 -06:00 [INF] Hosting environment: Production
2025-11-05 14:21:15.511 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 14:21:15.931 -06:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 14:21:16.058 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 14:21:16.063 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 14:21:16.065 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 14:21:16.067 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 14:21:16.069 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 14:21:16.070 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 14:21:22.053 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 14:21:22.171 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 14:21:22.177 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 14:21:22.195 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 14:21:22.213 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 14:21:26.901 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c0"."Id", "c0"."ConsultationId", "c0"."CreatedAt", "c0"."DoctorId", "c0"."Duration", "c0"."IsActive", "c0"."Notes", "c0"."PatientId", "c0"."Reason", "c0"."ScheduledAt", "c0"."Status", "c0"."UpdatedAt", "p"."Id", "p"."Allergies", "p"."BirthDate", "p"."ChronicConditions", "p"."CreatedAt", "p"."CustomerId", "p"."GeneralData", "p"."IsActive", "p"."Name", "p"."Notes", "p"."Phone", "p"."UpdatedAt", "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM (
    SELECT "c"."Id", "c"."ConsultationId", "c"."CreatedAt", "c"."DoctorId", "c"."Duration", "c"."IsActive", "c"."Notes", "c"."PatientId", "c"."Reason", "c"."ScheduledAt", "c"."Status", "c"."UpdatedAt"
    FROM "citas" AS "c"
    WHERE "c"."ScheduledAt" >= @__start_0 AND "c"."ScheduledAt" <= @__end_1 AND "c"."Status" IN (1, 2, 3)
    ORDER BY "c"."ScheduledAt"
    LIMIT @__p_2
) AS "c0"
INNER JOIN "pacientes" AS "p" ON "c0"."PatientId" = "p"."Id"
INNER JOIN "users" AS "u" ON "c0"."DoctorId" = "u"."Id"
ORDER BY "c0"."ScheduledAt"
2025-11-05 14:21:27.685 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 14:21:40.483 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 14:21:41.392 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c0"."Id", "c0"."ConsultationId", "c0"."CreatedAt", "c0"."DoctorId", "c0"."Duration", "c0"."IsActive", "c0"."Notes", "c0"."PatientId", "c0"."Reason", "c0"."ScheduledAt", "c0"."Status", "c0"."UpdatedAt", "p"."Id", "p"."Allergies", "p"."BirthDate", "p"."ChronicConditions", "p"."CreatedAt", "p"."CustomerId", "p"."GeneralData", "p"."IsActive", "p"."Name", "p"."Notes", "p"."Phone", "p"."UpdatedAt", "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM (
    SELECT "c"."Id", "c"."ConsultationId", "c"."CreatedAt", "c"."DoctorId", "c"."Duration", "c"."IsActive", "c"."Notes", "c"."PatientId", "c"."Reason", "c"."ScheduledAt", "c"."Status", "c"."UpdatedAt"
    FROM "citas" AS "c"
    WHERE "c"."ScheduledAt" >= @__start_0 AND "c"."ScheduledAt" <= @__end_1 AND "c"."Status" IN (1, 2, 3)
    ORDER BY "c"."ScheduledAt"
    LIMIT @__p_2
) AS "c0"
INNER JOIN "pacientes" AS "p" ON "c0"."PatientId" = "p"."Id"
INNER JOIN "users" AS "u" ON "c0"."DoctorId" = "u"."Id"
ORDER BY "c0"."ScheduledAt"
2025-11-05 14:21:45.033 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Name", "p"."Phone", "p"."BirthDate", "p"."Notes", (
    SELECT "c"."ConsultationDate"
    FROM "consultas" AS "c"
    WHERE "p"."Id" = "c"."PatientId"
    ORDER BY "c"."ConsultationDate" DESC
    LIMIT 1) AS "LastConsultation"
FROM "pacientes" AS "p"
ORDER BY "p"."Name"
LIMIT @__p_0
2025-11-05 14:21:46.844 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__start_0 AND "v"."SaleDate" <= @__end_1
2025-11-05 14:21:46.846 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__start_0 AND "v"."SaleDate" <= @__end_1
2025-11-05 14:21:47.397 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."CreatedAt", "c"."IsActive", "c"."Key", "c"."UpdatedAt", "c"."Value"
FROM "configuracion" AS "c"
WHERE "c"."Key" IN ('General.StoreName', 'General.StoreAddress', 'General.StorePhone', 'General.TicketFooter')
2025-11-05 14:21:49.996 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 14:22:13.439 -06:00 [INF] Application is shutting down...
2025-11-05 15:27:57.194 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 15:27:57.225 -06:00 [INF] Hosting environment: Production
2025-11-05 15:27:57.225 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 15:27:57.710 -06:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 15:27:57.854 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 15:27:57.860 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 15:27:57.862 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 15:27:57.864 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 15:27:57.866 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 15:27:57.867 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 15:28:09.865 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 15:28:09.977 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 15:28:09.984 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 15:28:10.001 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 15:28:10.019 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 15:28:36.518 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__query_0='?' (Size = 11), @__Format_2='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."Barcode", "p0"."Cost", "p0"."CreatedAt", "p0"."Description", "p0"."InternalCode", "p0"."IsActive", "p0"."Location", "p0"."Name", "p0"."Presentation", "p0"."Price", "p0"."StockMinimum", "p0"."SupplierId", "p0"."TaxRate", "p0"."UpdatedAt", "p0"."UsesBatches", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    WHERE "p"."Barcode" = @__query_0 OR "p"."InternalCode" = @__query_0 OR "p"."Name" LIKE @__Format_2
    LIMIT 1
) AS "p0"
LEFT JOIN "lotes" AS "l" ON "p0"."Id" = "l"."ProductId"
ORDER BY "p0"."Id"
2025-11-05 15:28:36.524 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__product_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("l"."RemainingQuantity"), '0.0')
FROM "lotes" AS "l"
WHERE "l"."ProductId" = @__product_Id_0
2025-11-05 15:28:51.229 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sequenceName_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CreatedAt", "s"."CurrentValue", "s"."IsActive", "s"."Name", "s"."Padding", "s"."Prefix", "s"."UpdatedAt"
FROM "secuencias" AS "s"
WHERE "s"."Name" = @__sequenceName_0
LIMIT 1
2025-11-05 15:28:51.266 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "secuencias" SET "CurrentValue" = @p0
WHERE "Id" = @p1
RETURNING 1;
2025-11-05 15:28:51.325 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__line_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."Barcode", "p0"."Cost", "p0"."CreatedAt", "p0"."Description", "p0"."InternalCode", "p0"."IsActive", "p0"."Location", "p0"."Name", "p0"."Presentation", "p0"."Price", "p0"."StockMinimum", "p0"."SupplierId", "p0"."TaxRate", "p0"."UpdatedAt", "p0"."UsesBatches", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    WHERE "p"."Id" = @__line_ProductId_0
    LIMIT 1
) AS "p0"
LEFT JOIN "lotes" AS "l" ON "p0"."Id" = "l"."ProductId"
ORDER BY "p0"."Id"
2025-11-05 15:28:51.357 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__product_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM "lotes" AS "l"
WHERE "l"."ProductId" = @__product_Id_0 AND ef_compare("l"."RemainingQuantity", '0.0') > 0
ORDER BY "l"."ExpirationDate"
2025-11-05 15:28:51.404 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
UPDATE "lotes" SET "RemainingQuantity" = @p0
WHERE "Id" = @p1
RETURNING 1;
2025-11-05 15:28:51.408 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Boolean), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Decimal), @p6='?' (Size = 14), @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "movimientos_inventario" ("CreatedAt", "IsActive", "MovementType", "ProductId", "ProductLotId", "Quantity", "Reason", "UpdatedAt", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
2025-11-05 15:28:51.415 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (Size = 8), @p6='?' (DbType = Boolean), @p7='?', @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = Decimal), @p12='?' (DbType = Decimal), @p13='?' (DbType = Decimal), @p14='?' (DbType = DateTime), @p15='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ventas" ("CardReceived", "CashReceived", "ChangeGiven", "CreatedAt", "CustomerId", "Folio", "IsActive", "Notes", "PaymentMethod", "RelatedSaleId", "SaleDate", "Subtotal", "TaxTotal", "Total", "UpdatedAt", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15)
RETURNING "Id";
2025-11-05 15:28:51.417 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@p16='?' (DbType = DateTime), @p17='?' (DbType = Decimal), @p18='?' (DbType = Boolean), @p19='?' (DbType = Decimal), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32), @p22='?' (DbType = Decimal), @p23='?' (DbType = Int32), @p24='?' (DbType = Decimal), @p25='?' (DbType = Decimal), @p26='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "venta_detalle" ("CreatedAt", "Discount", "IsActive", "LineTotal", "ProductId", "ProductLotId", "Quantity", "SaleId", "TaxRate", "UnitPrice", "UpdatedAt")
VALUES (@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26)
RETURNING "Id";
2025-11-05 15:29:06.540 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 15:29:13.107 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c0"."Id", "c0"."ConsultationId", "c0"."CreatedAt", "c0"."DoctorId", "c0"."Duration", "c0"."IsActive", "c0"."Notes", "c0"."PatientId", "c0"."Reason", "c0"."ScheduledAt", "c0"."Status", "c0"."UpdatedAt", "p"."Id", "p"."Allergies", "p"."BirthDate", "p"."ChronicConditions", "p"."CreatedAt", "p"."CustomerId", "p"."GeneralData", "p"."IsActive", "p"."Name", "p"."Notes", "p"."Phone", "p"."UpdatedAt", "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM (
    SELECT "c"."Id", "c"."ConsultationId", "c"."CreatedAt", "c"."DoctorId", "c"."Duration", "c"."IsActive", "c"."Notes", "c"."PatientId", "c"."Reason", "c"."ScheduledAt", "c"."Status", "c"."UpdatedAt"
    FROM "citas" AS "c"
    WHERE "c"."ScheduledAt" >= @__start_0 AND "c"."ScheduledAt" <= @__end_1 AND "c"."Status" IN (1, 2, 3)
    ORDER BY "c"."ScheduledAt"
    LIMIT @__p_2
) AS "c0"
INNER JOIN "pacientes" AS "p" ON "c0"."PatientId" = "p"."Id"
INNER JOIN "users" AS "u" ON "c0"."DoctorId" = "u"."Id"
ORDER BY "c0"."ScheduledAt"
2025-11-05 15:29:26.436 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Name", "p"."Phone", "p"."BirthDate", "p"."Notes", (
    SELECT "c"."ConsultationDate"
    FROM "consultas" AS "c"
    WHERE "p"."Id" = "c"."PatientId"
    ORDER BY "c"."ConsultationDate" DESC
    LIMIT 1) AS "LastConsultation"
FROM "pacientes" AS "p"
ORDER BY "p"."Name"
LIMIT @__p_0
2025-11-05 15:29:50.308 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__start_0 AND "v"."SaleDate" <= @__end_1
2025-11-05 15:29:50.310 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__start_0 AND "v"."SaleDate" <= @__end_1
2025-11-05 15:29:52.796 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."CreatedAt", "c"."IsActive", "c"."Key", "c"."UpdatedAt", "c"."Value"
FROM "configuracion" AS "c"
WHERE "c"."Key" IN ('General.StoreName', 'General.StoreAddress', 'General.StorePhone', 'General.TicketFooter')
2025-11-05 15:29:53.807 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 15:29:55.210 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c0"."Id", "c0"."ConsultationId", "c0"."CreatedAt", "c0"."DoctorId", "c0"."Duration", "c0"."IsActive", "c0"."Notes", "c0"."PatientId", "c0"."Reason", "c0"."ScheduledAt", "c0"."Status", "c0"."UpdatedAt", "p"."Id", "p"."Allergies", "p"."BirthDate", "p"."ChronicConditions", "p"."CreatedAt", "p"."CustomerId", "p"."GeneralData", "p"."IsActive", "p"."Name", "p"."Notes", "p"."Phone", "p"."UpdatedAt", "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM (
    SELECT "c"."Id", "c"."ConsultationId", "c"."CreatedAt", "c"."DoctorId", "c"."Duration", "c"."IsActive", "c"."Notes", "c"."PatientId", "c"."Reason", "c"."ScheduledAt", "c"."Status", "c"."UpdatedAt"
    FROM "citas" AS "c"
    WHERE "c"."ScheduledAt" >= @__start_0 AND "c"."ScheduledAt" <= @__end_1 AND "c"."Status" IN (1, 2, 3)
    ORDER BY "c"."ScheduledAt"
    LIMIT @__p_2
) AS "c0"
INNER JOIN "pacientes" AS "p" ON "c0"."PatientId" = "p"."Id"
INNER JOIN "users" AS "u" ON "c0"."DoctorId" = "u"."Id"
ORDER BY "c0"."ScheduledAt"
2025-11-05 15:30:08.928 -06:00 [INF] Application is shutting down...
2025-11-05 15:37:39.950 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 15:37:39.972 -06:00 [INF] Hosting environment: Production
2025-11-05 15:37:39.973 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 15:37:40.518 -06:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 15:37:40.664 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 15:37:40.671 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 15:37:40.673 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 15:37:40.674 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 15:37:40.676 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 15:37:40.677 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 15:37:53.299 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 15:37:53.414 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 15:37:53.420 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 15:37:53.439 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 15:37:53.458 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 15:37:58.533 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 15:38:01.189 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c0"."Id", "c0"."ConsultationId", "c0"."CreatedAt", "c0"."DoctorId", "c0"."Duration", "c0"."IsActive", "c0"."Notes", "c0"."PatientId", "c0"."Reason", "c0"."ScheduledAt", "c0"."Status", "c0"."UpdatedAt", "p"."Id", "p"."Allergies", "p"."BirthDate", "p"."ChronicConditions", "p"."CreatedAt", "p"."CustomerId", "p"."GeneralData", "p"."IsActive", "p"."Name", "p"."Notes", "p"."Phone", "p"."UpdatedAt", "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM (
    SELECT "c"."Id", "c"."ConsultationId", "c"."CreatedAt", "c"."DoctorId", "c"."Duration", "c"."IsActive", "c"."Notes", "c"."PatientId", "c"."Reason", "c"."ScheduledAt", "c"."Status", "c"."UpdatedAt"
    FROM "citas" AS "c"
    WHERE "c"."ScheduledAt" >= @__start_0 AND "c"."ScheduledAt" <= @__end_1 AND "c"."Status" IN (1, 2, 3)
    ORDER BY "c"."ScheduledAt"
    LIMIT @__p_2
) AS "c0"
INNER JOIN "pacientes" AS "p" ON "c0"."PatientId" = "p"."Id"
INNER JOIN "users" AS "u" ON "c0"."DoctorId" = "u"."Id"
ORDER BY "c0"."ScheduledAt"
2025-11-05 15:38:25.737 -06:00 [INF] Application is shutting down...
2025-11-05 15:41:30.226 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 15:41:30.254 -06:00 [INF] Hosting environment: Production
2025-11-05 15:41:30.255 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 15:41:30.719 -06:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 15:41:30.860 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 15:41:30.869 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 15:41:30.870 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 15:41:30.872 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 15:41:30.874 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 15:41:30.875 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 15:41:44.312 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 15:41:44.429 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 15:41:44.434 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 15:41:44.450 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 15:41:44.471 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 15:41:48.032 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 15:41:50.204 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c0"."Id", "c0"."ConsultationId", "c0"."CreatedAt", "c0"."DoctorId", "c0"."Duration", "c0"."IsActive", "c0"."Notes", "c0"."PatientId", "c0"."Reason", "c0"."ScheduledAt", "c0"."Status", "c0"."UpdatedAt", "p"."Id", "p"."Allergies", "p"."BirthDate", "p"."ChronicConditions", "p"."CreatedAt", "p"."CustomerId", "p"."GeneralData", "p"."IsActive", "p"."Name", "p"."Notes", "p"."Phone", "p"."UpdatedAt", "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM (
    SELECT "c"."Id", "c"."ConsultationId", "c"."CreatedAt", "c"."DoctorId", "c"."Duration", "c"."IsActive", "c"."Notes", "c"."PatientId", "c"."Reason", "c"."ScheduledAt", "c"."Status", "c"."UpdatedAt"
    FROM "citas" AS "c"
    WHERE "c"."ScheduledAt" >= @__start_0 AND "c"."ScheduledAt" <= @__end_1 AND "c"."Status" IN (1, 2, 3)
    ORDER BY "c"."ScheduledAt"
    LIMIT @__p_2
) AS "c0"
INNER JOIN "pacientes" AS "p" ON "c0"."PatientId" = "p"."Id"
INNER JOIN "users" AS "u" ON "c0"."DoctorId" = "u"."Id"
ORDER BY "c0"."ScheduledAt"
2025-11-05 15:43:19.045 -06:00 [INF] Application is shutting down...
2025-11-05 15:45:45.119 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 15:45:45.142 -06:00 [INF] Hosting environment: Production
2025-11-05 15:45:45.143 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 15:45:45.630 -06:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 15:45:45.771 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 15:45:45.777 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 15:45:45.779 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 15:45:45.781 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 15:45:45.782 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 15:45:45.784 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 15:45:55.639 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 15:45:55.751 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 15:45:55.757 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 15:45:55.774 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 15:45:55.794 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 15:45:59.208 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c0"."Id", "c0"."ConsultationId", "c0"."CreatedAt", "c0"."DoctorId", "c0"."Duration", "c0"."IsActive", "c0"."Notes", "c0"."PatientId", "c0"."Reason", "c0"."ScheduledAt", "c0"."Status", "c0"."UpdatedAt", "p"."Id", "p"."Allergies", "p"."BirthDate", "p"."ChronicConditions", "p"."CreatedAt", "p"."CustomerId", "p"."GeneralData", "p"."IsActive", "p"."Name", "p"."Notes", "p"."Phone", "p"."UpdatedAt", "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM (
    SELECT "c"."Id", "c"."ConsultationId", "c"."CreatedAt", "c"."DoctorId", "c"."Duration", "c"."IsActive", "c"."Notes", "c"."PatientId", "c"."Reason", "c"."ScheduledAt", "c"."Status", "c"."UpdatedAt"
    FROM "citas" AS "c"
    WHERE "c"."ScheduledAt" >= @__start_0 AND "c"."ScheduledAt" <= @__end_1 AND "c"."Status" IN (1, 2, 3)
    ORDER BY "c"."ScheduledAt"
    LIMIT @__p_2
) AS "c0"
INNER JOIN "pacientes" AS "p" ON "c0"."PatientId" = "p"."Id"
INNER JOIN "users" AS "u" ON "c0"."DoctorId" = "u"."Id"
ORDER BY "c0"."ScheduledAt"
2025-11-05 15:46:21.853 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Name", "p"."Phone", "p"."BirthDate", "p"."Notes", (
    SELECT "c"."ConsultationDate"
    FROM "consultas" AS "c"
    WHERE "p"."Id" = "c"."PatientId"
    ORDER BY "c"."ConsultationDate" DESC
    LIMIT 1) AS "LastConsultation"
FROM "pacientes" AS "p"
ORDER BY "p"."Name"
LIMIT @__p_0
2025-11-05 15:46:26.264 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c0"."Id", "c0"."ConsultationId", "c0"."CreatedAt", "c0"."DoctorId", "c0"."Duration", "c0"."IsActive", "c0"."Notes", "c0"."PatientId", "c0"."Reason", "c0"."ScheduledAt", "c0"."Status", "c0"."UpdatedAt", "p"."Id", "p"."Allergies", "p"."BirthDate", "p"."ChronicConditions", "p"."CreatedAt", "p"."CustomerId", "p"."GeneralData", "p"."IsActive", "p"."Name", "p"."Notes", "p"."Phone", "p"."UpdatedAt", "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM (
    SELECT "c"."Id", "c"."ConsultationId", "c"."CreatedAt", "c"."DoctorId", "c"."Duration", "c"."IsActive", "c"."Notes", "c"."PatientId", "c"."Reason", "c"."ScheduledAt", "c"."Status", "c"."UpdatedAt"
    FROM "citas" AS "c"
    WHERE "c"."ScheduledAt" >= @__start_0 AND "c"."ScheduledAt" <= @__end_1 AND "c"."Status" IN (1, 2, 3)
    ORDER BY "c"."ScheduledAt"
    LIMIT @__p_2
) AS "c0"
INNER JOIN "pacientes" AS "p" ON "c0"."PatientId" = "p"."Id"
INNER JOIN "users" AS "u" ON "c0"."DoctorId" = "u"."Id"
ORDER BY "c0"."ScheduledAt"
2025-11-05 15:46:31.743 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c0"."Id", "c0"."ConsultationId", "c0"."CreatedAt", "c0"."DoctorId", "c0"."Duration", "c0"."IsActive", "c0"."Notes", "c0"."PatientId", "c0"."Reason", "c0"."ScheduledAt", "c0"."Status", "c0"."UpdatedAt", "p"."Id", "p"."Allergies", "p"."BirthDate", "p"."ChronicConditions", "p"."CreatedAt", "p"."CustomerId", "p"."GeneralData", "p"."IsActive", "p"."Name", "p"."Notes", "p"."Phone", "p"."UpdatedAt", "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM (
    SELECT "c"."Id", "c"."ConsultationId", "c"."CreatedAt", "c"."DoctorId", "c"."Duration", "c"."IsActive", "c"."Notes", "c"."PatientId", "c"."Reason", "c"."ScheduledAt", "c"."Status", "c"."UpdatedAt"
    FROM "citas" AS "c"
    WHERE "c"."ScheduledAt" >= @__start_0 AND "c"."ScheduledAt" <= @__end_1
    ORDER BY "c"."ScheduledAt"
    LIMIT @__p_2
) AS "c0"
INNER JOIN "pacientes" AS "p" ON "c0"."PatientId" = "p"."Id"
INNER JOIN "users" AS "u" ON "c0"."DoctorId" = "u"."Id"
ORDER BY "c0"."ScheduledAt"
2025-11-05 15:46:32.264 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c0"."Id", "c0"."ConsultationId", "c0"."CreatedAt", "c0"."DoctorId", "c0"."Duration", "c0"."IsActive", "c0"."Notes", "c0"."PatientId", "c0"."Reason", "c0"."ScheduledAt", "c0"."Status", "c0"."UpdatedAt", "p"."Id", "p"."Allergies", "p"."BirthDate", "p"."ChronicConditions", "p"."CreatedAt", "p"."CustomerId", "p"."GeneralData", "p"."IsActive", "p"."Name", "p"."Notes", "p"."Phone", "p"."UpdatedAt", "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM (
    SELECT "c"."Id", "c"."ConsultationId", "c"."CreatedAt", "c"."DoctorId", "c"."Duration", "c"."IsActive", "c"."Notes", "c"."PatientId", "c"."Reason", "c"."ScheduledAt", "c"."Status", "c"."UpdatedAt"
    FROM "citas" AS "c"
    WHERE "c"."ScheduledAt" >= @__start_0 AND "c"."ScheduledAt" <= @__end_1 AND "c"."Status" IN (1, 2, 3)
    ORDER BY "c"."ScheduledAt"
    LIMIT @__p_2
) AS "c0"
INNER JOIN "pacientes" AS "p" ON "c0"."PatientId" = "p"."Id"
INNER JOIN "users" AS "u" ON "c0"."DoctorId" = "u"."Id"
ORDER BY "c0"."ScheduledAt"
2025-11-05 15:46:36.984 -06:00 [INF] Application is shutting down...
2025-11-05 15:46:45.777 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 15:46:45.796 -06:00 [INF] Hosting environment: Production
2025-11-05 15:46:45.796 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 15:46:46.259 -06:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 15:46:46.404 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 15:46:46.411 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 15:46:46.414 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 15:46:46.416 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 15:46:46.417 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 15:46:46.419 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 15:47:07.595 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 15:47:07.715 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 15:47:07.721 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 15:47:07.740 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 15:47:07.760 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 15:47:09.303 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c0"."Id", "c0"."ConsultationId", "c0"."CreatedAt", "c0"."DoctorId", "c0"."Duration", "c0"."IsActive", "c0"."Notes", "c0"."PatientId", "c0"."Reason", "c0"."ScheduledAt", "c0"."Status", "c0"."UpdatedAt", "p"."Id", "p"."Allergies", "p"."BirthDate", "p"."ChronicConditions", "p"."CreatedAt", "p"."CustomerId", "p"."GeneralData", "p"."IsActive", "p"."Name", "p"."Notes", "p"."Phone", "p"."UpdatedAt", "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM (
    SELECT "c"."Id", "c"."ConsultationId", "c"."CreatedAt", "c"."DoctorId", "c"."Duration", "c"."IsActive", "c"."Notes", "c"."PatientId", "c"."Reason", "c"."ScheduledAt", "c"."Status", "c"."UpdatedAt"
    FROM "citas" AS "c"
    WHERE "c"."ScheduledAt" >= @__start_0 AND "c"."ScheduledAt" <= @__end_1 AND "c"."Status" IN (1, 2, 3)
    ORDER BY "c"."ScheduledAt"
    LIMIT @__p_2
) AS "c0"
INNER JOIN "pacientes" AS "p" ON "c0"."PatientId" = "p"."Id"
INNER JOIN "users" AS "u" ON "c0"."DoctorId" = "u"."Id"
ORDER BY "c0"."ScheduledAt"
2025-11-05 15:49:09.215 -06:00 [INF] Application is shutting down...
2025-11-05 15:52:01.807 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 15:52:01.828 -06:00 [INF] Hosting environment: Production
2025-11-05 15:52:01.828 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 15:52:02.285 -06:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 15:52:02.420 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 15:52:02.427 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 15:52:02.430 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 15:52:02.431 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 15:52:02.433 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 15:52:02.434 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 15:52:12.377 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 15:52:12.494 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 15:52:12.501 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 15:52:12.515 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 15:52:12.536 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 15:52:15.583 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c0"."Id", "c0"."ConsultationId", "c0"."CreatedAt", "c0"."DoctorId", "c0"."Duration", "c0"."IsActive", "c0"."Notes", "c0"."PatientId", "c0"."Reason", "c0"."ScheduledAt", "c0"."Status", "c0"."UpdatedAt", "p"."Id", "p"."Allergies", "p"."BirthDate", "p"."ChronicConditions", "p"."CreatedAt", "p"."CustomerId", "p"."GeneralData", "p"."IsActive", "p"."Name", "p"."Notes", "p"."Phone", "p"."UpdatedAt", "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM (
    SELECT "c"."Id", "c"."ConsultationId", "c"."CreatedAt", "c"."DoctorId", "c"."Duration", "c"."IsActive", "c"."Notes", "c"."PatientId", "c"."Reason", "c"."ScheduledAt", "c"."Status", "c"."UpdatedAt"
    FROM "citas" AS "c"
    WHERE "c"."ScheduledAt" >= @__start_0 AND "c"."ScheduledAt" <= @__end_1 AND "c"."Status" IN (1, 2, 3)
    ORDER BY "c"."ScheduledAt"
    LIMIT @__p_2
) AS "c0"
INNER JOIN "pacientes" AS "p" ON "c0"."PatientId" = "p"."Id"
INNER JOIN "users" AS "u" ON "c0"."DoctorId" = "u"."Id"
ORDER BY "c0"."ScheduledAt"
2025-11-05 15:52:23.885 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c0"."Id", "c0"."ConsultationId", "c0"."CreatedAt", "c0"."DoctorId", "c0"."Duration", "c0"."IsActive", "c0"."Notes", "c0"."PatientId", "c0"."Reason", "c0"."ScheduledAt", "c0"."Status", "c0"."UpdatedAt", "p"."Id", "p"."Allergies", "p"."BirthDate", "p"."ChronicConditions", "p"."CreatedAt", "p"."CustomerId", "p"."GeneralData", "p"."IsActive", "p"."Name", "p"."Notes", "p"."Phone", "p"."UpdatedAt", "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM (
    SELECT "c"."Id", "c"."ConsultationId", "c"."CreatedAt", "c"."DoctorId", "c"."Duration", "c"."IsActive", "c"."Notes", "c"."PatientId", "c"."Reason", "c"."ScheduledAt", "c"."Status", "c"."UpdatedAt"
    FROM "citas" AS "c"
    WHERE "c"."ScheduledAt" >= @__start_0 AND "c"."ScheduledAt" <= @__end_1 AND "c"."Status" IN (1, 2, 3)
    ORDER BY "c"."ScheduledAt"
    LIMIT @__p_2
) AS "c0"
INNER JOIN "pacientes" AS "p" ON "c0"."PatientId" = "p"."Id"
INNER JOIN "users" AS "u" ON "c0"."DoctorId" = "u"."Id"
ORDER BY "c0"."ScheduledAt"
2025-11-05 15:52:24.350 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c0"."Id", "c0"."ConsultationId", "c0"."CreatedAt", "c0"."DoctorId", "c0"."Duration", "c0"."IsActive", "c0"."Notes", "c0"."PatientId", "c0"."Reason", "c0"."ScheduledAt", "c0"."Status", "c0"."UpdatedAt", "p"."Id", "p"."Allergies", "p"."BirthDate", "p"."ChronicConditions", "p"."CreatedAt", "p"."CustomerId", "p"."GeneralData", "p"."IsActive", "p"."Name", "p"."Notes", "p"."Phone", "p"."UpdatedAt", "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM (
    SELECT "c"."Id", "c"."ConsultationId", "c"."CreatedAt", "c"."DoctorId", "c"."Duration", "c"."IsActive", "c"."Notes", "c"."PatientId", "c"."Reason", "c"."ScheduledAt", "c"."Status", "c"."UpdatedAt"
    FROM "citas" AS "c"
    WHERE "c"."ScheduledAt" >= @__start_0 AND "c"."ScheduledAt" <= @__end_1 AND "c"."Status" IN (1, 2, 3)
    ORDER BY "c"."ScheduledAt"
    LIMIT @__p_2
) AS "c0"
INNER JOIN "pacientes" AS "p" ON "c0"."PatientId" = "p"."Id"
INNER JOIN "users" AS "u" ON "c0"."DoctorId" = "u"."Id"
ORDER BY "c0"."ScheduledAt"
2025-11-05 15:52:31.185 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 15:52:50.838 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__query_0='?' (Size = 11), @__Format_2='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."Barcode", "p0"."Cost", "p0"."CreatedAt", "p0"."Description", "p0"."InternalCode", "p0"."IsActive", "p0"."Location", "p0"."Name", "p0"."Presentation", "p0"."Price", "p0"."StockMinimum", "p0"."SupplierId", "p0"."TaxRate", "p0"."UpdatedAt", "p0"."UsesBatches", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    WHERE "p"."Barcode" = @__query_0 OR "p"."InternalCode" = @__query_0 OR "p"."Name" LIKE @__Format_2
    LIMIT 1
) AS "p0"
LEFT JOIN "lotes" AS "l" ON "p0"."Id" = "l"."ProductId"
ORDER BY "p0"."Id"
2025-11-05 15:52:50.842 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__product_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("l"."RemainingQuantity"), '0.0')
FROM "lotes" AS "l"
WHERE "l"."ProductId" = @__product_Id_0
2025-11-05 15:53:07.763 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sequenceName_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."CreatedAt", "s"."CurrentValue", "s"."IsActive", "s"."Name", "s"."Padding", "s"."Prefix", "s"."UpdatedAt"
FROM "secuencias" AS "s"
WHERE "s"."Name" = @__sequenceName_0
LIMIT 1
2025-11-05 15:53:07.798 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "secuencias" SET "CurrentValue" = @p0
WHERE "Id" = @p1
RETURNING 1;
2025-11-05 15:53:07.855 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__line_ProductId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p0"."Id", "p0"."Barcode", "p0"."Cost", "p0"."CreatedAt", "p0"."Description", "p0"."InternalCode", "p0"."IsActive", "p0"."Location", "p0"."Name", "p0"."Presentation", "p0"."Price", "p0"."StockMinimum", "p0"."SupplierId", "p0"."TaxRate", "p0"."UpdatedAt", "p0"."UsesBatches", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    WHERE "p"."Id" = @__line_ProductId_0
    LIMIT 1
) AS "p0"
LEFT JOIN "lotes" AS "l" ON "p0"."Id" = "l"."ProductId"
ORDER BY "p0"."Id"
2025-11-05 15:53:07.882 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__product_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM "lotes" AS "l"
WHERE "l"."ProductId" = @__product_Id_0 AND ef_compare("l"."RemainingQuantity", '0.0') > 0
ORDER BY "l"."ExpirationDate"
2025-11-05 15:53:07.949 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
UPDATE "lotes" SET "RemainingQuantity" = @p0
WHERE "Id" = @p1
RETURNING 1;
2025-11-05 15:53:07.950 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Boolean), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Decimal), @p6='?' (Size = 14), @p7='?' (DbType = DateTime), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "movimientos_inventario" ("CreatedAt", "IsActive", "MovementType", "ProductId", "ProductLotId", "Quantity", "Reason", "UpdatedAt", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id";
2025-11-05 15:53:07.955 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = DateTime), @p4='?' (DbType = Int32), @p5='?' (Size = 8), @p6='?' (DbType = Boolean), @p7='?', @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = Decimal), @p12='?' (DbType = Decimal), @p13='?' (DbType = Decimal), @p14='?' (DbType = DateTime), @p15='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ventas" ("CardReceived", "CashReceived", "ChangeGiven", "CreatedAt", "CustomerId", "Folio", "IsActive", "Notes", "PaymentMethod", "RelatedSaleId", "SaleDate", "Subtotal", "TaxTotal", "Total", "UpdatedAt", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15)
RETURNING "Id";
2025-11-05 15:53:07.958 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@p16='?' (DbType = DateTime), @p17='?' (DbType = Decimal), @p18='?' (DbType = Boolean), @p19='?' (DbType = Decimal), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32), @p22='?' (DbType = Decimal), @p23='?' (DbType = Int32), @p24='?' (DbType = Decimal), @p25='?' (DbType = Decimal), @p26='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "venta_detalle" ("CreatedAt", "Discount", "IsActive", "LineTotal", "ProductId", "ProductLotId", "Quantity", "SaleId", "TaxRate", "UnitPrice", "UpdatedAt")
VALUES (@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26)
RETURNING "Id";
2025-11-05 15:53:13.802 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 15:53:29.660 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 15:53:29.660 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 15:53:29.661 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 15:53:29.662 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 15:53:41.377 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."CreatedAt", "c"."IsActive", "c"."Key", "c"."UpdatedAt", "c"."Value"
FROM "configuracion" AS "c"
WHERE "c"."Key" IN ('General.StoreName', 'General.StoreAddress', 'General.StorePhone', 'General.TicketFooter')
2025-11-05 15:53:43.730 -06:00 [INF] Application is shutting down...
2025-11-05 16:03:28.645 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 16:03:28.670 -06:00 [INF] Hosting environment: Production
2025-11-05 16:03:28.670 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 16:03:29.203 -06:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 16:03:29.356 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 16:03:29.362 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 16:03:29.364 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 16:03:29.365 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 16:03:29.367 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 16:03:29.369 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 16:03:46.184 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 16:03:46.311 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 16:03:46.317 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 16:03:46.338 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 16:03:46.360 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 16:19:28.609 -06:00 [INF] Application is shutting down...
2025-11-05 16:21:04.687 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 16:21:04.710 -06:00 [INF] Hosting environment: Production
2025-11-05 16:21:04.710 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 16:21:05.190 -06:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 16:21:05.360 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 16:21:05.368 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 16:21:05.370 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 16:21:05.372 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 16:21:05.373 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 16:21:05.375 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 16:21:13.852 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 16:21:13.973 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 16:21:13.980 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 16:21:13.996 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 16:21:14.018 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 16:22:13.931 -06:00 [INF] Application is shutting down...
2025-11-05 16:24:19.073 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 16:24:19.096 -06:00 [INF] Hosting environment: Production
2025-11-05 16:24:19.096 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 16:24:19.570 -06:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 16:24:19.738 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 16:24:19.751 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 16:24:19.755 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 16:24:19.759 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 16:24:19.761 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 16:24:19.765 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 16:24:27.142 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 16:24:27.264 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 16:24:27.269 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 16:24:27.284 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 16:24:27.305 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 16:24:34.976 -06:00 [INF] Application is shutting down...
2025-11-05 16:32:41.258 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 16:32:41.280 -06:00 [INF] Hosting environment: Production
2025-11-05 16:32:41.280 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 16:32:41.746 -06:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 16:32:41.882 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 16:32:41.888 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 16:32:41.890 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 16:32:41.892 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 16:32:41.894 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 16:32:41.895 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 16:32:51.757 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 16:32:51.880 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 16:32:51.885 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 16:32:51.902 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 16:32:51.921 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 16:33:14.919 -06:00 [INF] Application is shutting down...
2025-11-05 18:40:59.474 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 18:40:59.496 -06:00 [INF] Hosting environment: Production
2025-11-05 18:40:59.496 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 18:41:00.000 -06:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 18:41:00.145 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 18:41:00.154 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 18:41:00.156 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 18:41:00.157 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 18:41:00.159 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 18:41:00.160 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 18:41:09.293 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 18:41:09.460 -06:00 [INF] Executed DbCommand (4ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 18:41:09.467 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 18:41:09.484 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 18:41:09.511 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 18:41:11.712 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 18:43:13.536 -06:00 [INF] Application is shutting down...
2025-11-05 20:53:13.369 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 20:53:13.392 -06:00 [INF] Hosting environment: Production
2025-11-05 20:53:13.392 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 20:53:13.856 -06:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 20:53:13.991 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 20:53:13.997 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 20:53:13.999 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 20:53:14.000 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 20:53:14.002 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 20:53:14.004 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 20:53:26.909 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 20:53:27.044 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 20:53:27.051 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 20:53:27.070 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 20:53:27.091 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 20:53:28.682 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 20:53:56.854 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 20:53:57.486 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 20:54:02.223 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c0"."Id", "c0"."ConsultationId", "c0"."CreatedAt", "c0"."DoctorId", "c0"."Duration", "c0"."IsActive", "c0"."Notes", "c0"."PatientId", "c0"."Reason", "c0"."ScheduledAt", "c0"."Status", "c0"."UpdatedAt", "p"."Id", "p"."Allergies", "p"."BirthDate", "p"."ChronicConditions", "p"."CreatedAt", "p"."CustomerId", "p"."GeneralData", "p"."IsActive", "p"."Name", "p"."Notes", "p"."Phone", "p"."UpdatedAt", "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM (
    SELECT "c"."Id", "c"."ConsultationId", "c"."CreatedAt", "c"."DoctorId", "c"."Duration", "c"."IsActive", "c"."Notes", "c"."PatientId", "c"."Reason", "c"."ScheduledAt", "c"."Status", "c"."UpdatedAt"
    FROM "citas" AS "c"
    WHERE "c"."ScheduledAt" >= @__start_0 AND "c"."ScheduledAt" <= @__end_1 AND "c"."Status" IN (1, 2, 3)
    ORDER BY "c"."ScheduledAt"
    LIMIT @__p_2
) AS "c0"
INNER JOIN "pacientes" AS "p" ON "c0"."PatientId" = "p"."Id"
INNER JOIN "users" AS "u" ON "c0"."DoctorId" = "u"."Id"
ORDER BY "c0"."ScheduledAt"
2025-11-05 20:54:03.018 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Name", "p"."Phone", "p"."BirthDate", "p"."Notes", (
    SELECT "c"."ConsultationDate"
    FROM "consultas" AS "c"
    WHERE "p"."Id" = "c"."PatientId"
    ORDER BY "c"."ConsultationDate" DESC
    LIMIT 1) AS "LastConsultation"
FROM "pacientes" AS "p"
ORDER BY "p"."Name"
LIMIT @__p_0
2025-11-05 20:54:04.169 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 20:59:26.280 -06:00 [INF] Application is shutting down...
2025-11-05 21:00:01.743 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 21:00:01.770 -06:00 [INF] Hosting environment: Production
2025-11-05 21:00:01.770 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 21:00:02.339 -06:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 21:00:02.490 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 21:00:02.497 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 21:00:02.499 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 21:00:02.501 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 21:00:02.503 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 21:00:02.505 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 21:00:10.351 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 21:00:10.493 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 21:00:10.501 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 21:00:10.520 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 21:00:10.542 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 21:00:12.270 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 21:02:45.801 -06:00 [INF] Application is shutting down...
2025-11-05 21:05:45.803 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 21:05:45.830 -06:00 [INF] Hosting environment: Production
2025-11-05 21:05:45.830 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 21:05:46.358 -06:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 21:05:46.519 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 21:05:46.527 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 21:05:46.529 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 21:05:46.531 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 21:05:46.533 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 21:05:46.535 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 21:05:54.478 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 21:05:54.649 -06:00 [INF] Executed DbCommand (12ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 21:05:54.656 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 21:05:54.676 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 21:05:54.698 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 21:05:56.512 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 21:06:32.599 -06:00 [INF] Application is shutting down...
2025-11-05 21:26:56.425 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 21:26:56.488 -06:00 [INF] Hosting environment: Production
2025-11-05 21:26:56.489 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 21:26:57.841 -06:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 21:26:58.251 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 21:26:58.271 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 21:26:58.276 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 21:26:58.282 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 21:26:58.289 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 21:26:58.295 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 21:27:07.606 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 21:27:07.835 -06:00 [INF] Executed DbCommand (4ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 21:27:07.846 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 21:27:07.872 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 21:27:07.904 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 21:27:11.123 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c0"."Id", "c0"."ConsultationId", "c0"."CreatedAt", "c0"."DoctorId", "c0"."Duration", "c0"."IsActive", "c0"."Notes", "c0"."PatientId", "c0"."Reason", "c0"."ScheduledAt", "c0"."Status", "c0"."UpdatedAt", "p"."Id", "p"."Allergies", "p"."BirthDate", "p"."ChronicConditions", "p"."CreatedAt", "p"."CustomerId", "p"."GeneralData", "p"."IsActive", "p"."Name", "p"."Notes", "p"."Phone", "p"."UpdatedAt", "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM (
    SELECT "c"."Id", "c"."ConsultationId", "c"."CreatedAt", "c"."DoctorId", "c"."Duration", "c"."IsActive", "c"."Notes", "c"."PatientId", "c"."Reason", "c"."ScheduledAt", "c"."Status", "c"."UpdatedAt"
    FROM "citas" AS "c"
    WHERE "c"."ScheduledAt" >= @__start_0 AND "c"."ScheduledAt" <= @__end_1 AND "c"."Status" IN (1, 2, 3)
    ORDER BY "c"."ScheduledAt"
    LIMIT @__p_2
) AS "c0"
INNER JOIN "pacientes" AS "p" ON "c0"."PatientId" = "p"."Id"
INNER JOIN "users" AS "u" ON "c0"."DoctorId" = "u"."Id"
ORDER BY "c0"."ScheduledAt"
2025-11-05 21:27:19.174 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Name", "p"."Phone", "p"."BirthDate", "p"."Notes", (
    SELECT "c"."ConsultationDate"
    FROM "consultas" AS "c"
    WHERE "p"."Id" = "c"."PatientId"
    ORDER BY "c"."ConsultationDate" DESC
    LIMIT 1) AS "LastConsultation"
FROM "pacientes" AS "p"
ORDER BY "p"."Name"
LIMIT @__p_0
2025-11-05 21:27:22.423 -06:00 [INF] Application is shutting down...
2025-11-05 21:35:50.496 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 21:35:50.557 -06:00 [INF] Hosting environment: Production
2025-11-05 21:35:50.558 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 21:35:51.984 -06:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 21:35:52.600 -06:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 21:35:52.630 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 21:35:52.637 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 21:35:52.644 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 21:35:52.650 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 21:35:52.655 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 21:35:58.972 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 21:35:59.184 -06:00 [INF] Executed DbCommand (4ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 21:35:59.195 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 21:35:59.222 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 21:35:59.256 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 21:36:00.575 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Name", "p"."Phone", "p"."BirthDate", "p"."Notes", (
    SELECT "c"."ConsultationDate"
    FROM "consultas" AS "c"
    WHERE "p"."Id" = "c"."PatientId"
    ORDER BY "c"."ConsultationDate" DESC
    LIMIT 1) AS "LastConsultation"
FROM "pacientes" AS "p"
ORDER BY "p"."Name"
LIMIT @__p_0
2025-11-05 21:37:55.538 -06:00 [INF] Application is shutting down...
2025-11-05 21:46:36.219 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 21:46:36.240 -06:00 [INF] Hosting environment: Production
2025-11-05 21:46:36.241 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 21:46:36.751 -06:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 21:46:36.882 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 21:46:36.888 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 21:46:36.889 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 21:46:36.891 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 21:46:36.893 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 21:46:36.894 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 21:46:44.666 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 21:46:44.788 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 21:46:44.793 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 21:46:44.807 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 21:46:44.827 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 21:46:46.678 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Name", "p"."Phone", "p"."BirthDate", "p"."Notes", (
    SELECT "c"."ConsultationDate"
    FROM "consultas" AS "c"
    WHERE "p"."Id" = "c"."PatientId"
    ORDER BY "c"."ConsultationDate" DESC
    LIMIT 1) AS "LastConsultation"
FROM "pacientes" AS "p"
ORDER BY "p"."Name"
LIMIT @__p_0
2025-11-05 21:46:53.627 -06:00 [INF] Application is shutting down...
2025-11-05 21:54:31.583 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 21:54:31.608 -06:00 [INF] Hosting environment: Production
2025-11-05 21:54:31.609 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 21:54:32.125 -06:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 21:54:32.255 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 21:54:32.261 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 21:54:32.263 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 21:54:32.264 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 21:54:32.266 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 21:54:32.268 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 21:54:39.798 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 21:54:39.917 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 21:54:39.923 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 21:54:39.940 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 21:54:39.958 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 21:54:41.426 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__start_0 AND "v"."SaleDate" <= @__end_1
2025-11-05 21:54:41.428 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__start_0 AND "v"."SaleDate" <= @__end_1
2025-11-05 21:54:54.768 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."CreatedAt", "c"."IsActive", "c"."Key", "c"."UpdatedAt", "c"."Value"
FROM "configuracion" AS "c"
WHERE "c"."Key" IN ('General.StoreName', 'General.StoreAddress', 'General.StorePhone', 'General.TicketFooter')
2025-11-05 21:54:55.976 -06:00 [INF] Application is shutting down...
2025-11-05 22:03:15.378 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 22:03:15.399 -06:00 [INF] Hosting environment: Production
2025-11-05 22:03:15.399 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 22:03:15.871 -06:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 22:03:16.058 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 22:03:16.066 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 22:03:16.068 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 22:03:16.070 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 22:03:16.071 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 22:03:16.074 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 22:03:25.953 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 22:03:26.071 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 22:03:26.076 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 22:03:26.100 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 22:03:26.118 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 22:03:27.246 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."CreatedAt", "c"."IsActive", "c"."Key", "c"."UpdatedAt", "c"."Value"
FROM "configuracion" AS "c"
WHERE "c"."Key" IN ('General.StoreName', 'General.StoreAddress', 'General.StorePhone', 'General.TicketFooter')
2025-11-05 22:03:34.023 -06:00 [INF] Application is shutting down...
2025-11-05 22:04:01.900 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 22:04:01.921 -06:00 [INF] Hosting environment: Production
2025-11-05 22:04:01.921 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 22:04:02.411 -06:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 22:04:02.571 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 22:04:02.577 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 22:04:02.579 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 22:04:02.581 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 22:04:02.583 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 22:04:02.585 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 22:04:07.994 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 22:04:08.131 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 22:04:08.138 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 22:04:08.165 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 22:04:08.190 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 22:04:28.407 -06:00 [INF] Application is shutting down...
2025-11-05 22:26:39.406 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 22:26:39.424 -06:00 [INF] Hosting environment: Production
2025-11-05 22:26:39.424 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 22:26:39.835 -06:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 22:26:39.960 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 22:26:39.966 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 22:26:39.968 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 22:26:39.969 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 22:26:39.971 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 22:26:39.972 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 22:27:15.879 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 22:27:16.002 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 22:27:16.007 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 22:27:16.023 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 22:27:16.041 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 22:27:17.765 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Name"
FROM "pacientes" AS "p"
ORDER BY "p"."Name"
LIMIT @__p_0
2025-11-05 22:27:17.768 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."FullName" AS "Name"
FROM "users" AS "u"
WHERE "u"."Role" = 3
ORDER BY "u"."FullName"
2025-11-05 22:27:17.790 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c0"."Id", "c0"."ConsultationId", "c0"."CreatedAt", "c0"."DoctorId", "c0"."Duration", "c0"."IsActive", "c0"."Notes", "c0"."PatientId", "c0"."Reason", "c0"."ScheduledAt", "c0"."Status", "c0"."UpdatedAt", "p"."Id", "p"."Allergies", "p"."BirthDate", "p"."ChronicConditions", "p"."CreatedAt", "p"."CustomerId", "p"."GeneralData", "p"."IsActive", "p"."Name", "p"."Notes", "p"."Phone", "p"."UpdatedAt", "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM (
    SELECT "c"."Id", "c"."ConsultationId", "c"."CreatedAt", "c"."DoctorId", "c"."Duration", "c"."IsActive", "c"."Notes", "c"."PatientId", "c"."Reason", "c"."ScheduledAt", "c"."Status", "c"."UpdatedAt"
    FROM "citas" AS "c"
    WHERE "c"."ScheduledAt" >= @__start_0 AND "c"."ScheduledAt" <= @__end_1 AND "c"."Status" IN (1, 2, 3)
    ORDER BY "c"."ScheduledAt"
    LIMIT @__p_2
) AS "c0"
INNER JOIN "pacientes" AS "p" ON "c0"."PatientId" = "p"."Id"
INNER JOIN "users" AS "u" ON "c0"."DoctorId" = "u"."Id"
ORDER BY "c0"."ScheduledAt"
2025-11-05 22:28:22.804 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 22:28:22.804 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 22:28:22.805 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 22:28:22.806 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 22:28:27.688 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 22:28:32.212 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Name"
FROM "pacientes" AS "p"
ORDER BY "p"."Name"
LIMIT @__p_0
2025-11-05 22:28:32.212 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."FullName" AS "Name"
FROM "users" AS "u"
WHERE "u"."Role" = 3
ORDER BY "u"."FullName"
2025-11-05 22:28:32.213 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c0"."Id", "c0"."ConsultationId", "c0"."CreatedAt", "c0"."DoctorId", "c0"."Duration", "c0"."IsActive", "c0"."Notes", "c0"."PatientId", "c0"."Reason", "c0"."ScheduledAt", "c0"."Status", "c0"."UpdatedAt", "p"."Id", "p"."Allergies", "p"."BirthDate", "p"."ChronicConditions", "p"."CreatedAt", "p"."CustomerId", "p"."GeneralData", "p"."IsActive", "p"."Name", "p"."Notes", "p"."Phone", "p"."UpdatedAt", "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM (
    SELECT "c"."Id", "c"."ConsultationId", "c"."CreatedAt", "c"."DoctorId", "c"."Duration", "c"."IsActive", "c"."Notes", "c"."PatientId", "c"."Reason", "c"."ScheduledAt", "c"."Status", "c"."UpdatedAt"
    FROM "citas" AS "c"
    WHERE "c"."ScheduledAt" >= @__start_0 AND "c"."ScheduledAt" <= @__end_1 AND "c"."Status" IN (1, 2, 3)
    ORDER BY "c"."ScheduledAt"
    LIMIT @__p_2
) AS "c0"
INNER JOIN "pacientes" AS "p" ON "c0"."PatientId" = "p"."Id"
INNER JOIN "users" AS "u" ON "c0"."DoctorId" = "u"."Id"
ORDER BY "c0"."ScheduledAt"
2025-11-05 22:28:32.678 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."Name", "p"."Phone", "p"."BirthDate", "p"."Notes", (
    SELECT "c"."ConsultationDate"
    FROM "consultas" AS "c"
    WHERE "p"."Id" = "c"."PatientId"
    ORDER BY "c"."ConsultationDate" DESC
    LIMIT 1) AS "LastConsultation"
FROM "pacientes" AS "p"
ORDER BY "p"."Name"
LIMIT @__p_0
2025-11-05 22:28:40.287 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__start_0 AND "v"."SaleDate" <= @__end_1
2025-11-05 22:28:40.288 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__start_0 AND "v"."SaleDate" <= @__end_1
2025-11-05 22:28:42.337 -06:00 [INF] Application is shutting down...
2025-11-05 22:42:11.604 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 22:42:11.633 -06:00 [INF] Hosting environment: Production
2025-11-05 22:42:11.633 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 22:42:12.218 -06:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 22:42:12.362 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 22:42:12.369 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 22:42:12.372 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 22:42:12.374 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 22:42:12.376 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 22:42:12.378 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 22:42:22.020 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 22:42:22.140 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 22:42:22.145 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 22:42:22.162 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 22:42:22.181 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 22:42:32.180 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p1"."Id", "p1"."Barcode", "p1"."Cost", "p1"."CreatedAt", "p1"."Description", "p1"."InternalCode", "p1"."IsActive", "p1"."Location", "p1"."Name", "p1"."Presentation", "p1"."Price", "p1"."StockMinimum", "p1"."SupplierId", "p1"."TaxRate", "p1"."UpdatedAt", "p1"."UsesBatches", "p0"."Id", "p0"."CreatedAt", "p0"."Email", "p0"."IsActive", "p0"."Name", "p0"."Phone", "p0"."Rfc", "p0"."UpdatedAt", "l"."Id", "l"."CreatedAt", "l"."ExpirationDate", "l"."IsActive", "l"."LotCode", "l"."ProductId", "l"."Quantity", "l"."RemainingQuantity", "l"."UpdatedAt"
FROM (
    SELECT "p"."Id", "p"."Barcode", "p"."Cost", "p"."CreatedAt", "p"."Description", "p"."InternalCode", "p"."IsActive", "p"."Location", "p"."Name", "p"."Presentation", "p"."Price", "p"."StockMinimum", "p"."SupplierId", "p"."TaxRate", "p"."UpdatedAt", "p"."UsesBatches"
    FROM "productos" AS "p"
    ORDER BY "p"."Name"
    LIMIT @__p_0
) AS "p1"
LEFT JOIN "proveedores" AS "p0" ON "p1"."SupplierId" = "p0"."Id"
LEFT JOIN "lotes" AS "l" ON "p1"."Id" = "l"."ProductId"
ORDER BY "p1"."Name", "p1"."Id", "p0"."Id"
2025-11-05 22:42:57.775 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__start_0 AND "v"."SaleDate" <= @__end_1
2025-11-05 22:42:57.776 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__start_0 AND "v"."SaleDate" <= @__end_1
2025-11-05 22:42:57.817 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "v"."LineTotal", "v"."Quantity", "v"."UnitPrice", "v"."Discount", ef_multiply("v"."Quantity", "p"."Cost") AS "Cost"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__start_0 AND "v0"."SaleDate" <= @__end_1
2025-11-05 22:44:04.368 -06:00 [INF] Application is shutting down...
2025-11-05 22:49:37.646 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 22:49:37.668 -06:00 [INF] Hosting environment: Production
2025-11-05 22:49:37.669 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 22:49:38.175 -06:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 22:49:38.325 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 22:49:38.337 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 22:49:38.341 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 22:49:38.345 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 22:49:38.347 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 22:49:38.350 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 22:49:45.721 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 22:49:45.836 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 22:49:45.841 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 22:49:45.855 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 22:49:45.875 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 22:49:47.572 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__start_0 AND "v"."SaleDate" <= @__end_1
2025-11-05 22:49:47.574 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__start_0 AND "v"."SaleDate" <= @__end_1
2025-11-05 22:49:47.590 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "v0"."Key" AS "Date", COALESCE(ef_sum("v0"."Total"), '0.0') AS "Total", COUNT(*) AS "Count"
FROM (
    SELECT "v"."Total", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', "v"."SaleDate", 'start of day'), '0'), '.') AS "Key"
    FROM "ventas" AS "v"
    WHERE "v"."SaleDate" >= @__start_0 AND "v"."SaleDate" <= @__end_1
) AS "v0"
GROUP BY "v0"."Key"
ORDER BY "v0"."Key"
2025-11-05 22:49:47.602 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "v"."LineTotal", "v"."Quantity", "v"."UnitPrice", "v"."Discount", ef_multiply("v"."Quantity", "p"."Cost") AS "Cost"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__start_0 AND "v0"."SaleDate" <= @__end_1
2025-11-05 22:51:12.426 -06:00 [INF] Application is shutting down...
2025-11-05 22:55:56.138 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 22:55:56.160 -06:00 [INF] Hosting environment: Production
2025-11-05 22:55:56.161 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 22:55:56.631 -06:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 22:55:56.793 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 22:55:56.799 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 22:55:56.801 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 22:55:56.802 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 22:55:56.804 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 22:55:56.805 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 22:56:05.865 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 22:56:05.985 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 22:56:05.991 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 22:56:06.008 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 22:56:06.027 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 22:56:07.131 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__start_0 AND "v"."SaleDate" <= @__end_1
2025-11-05 22:56:07.132 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__start_0 AND "v"."SaleDate" <= @__end_1
2025-11-05 22:56:07.147 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "v0"."Key" AS "Date", COALESCE(ef_sum("v0"."Total"), '0.0') AS "Total", COUNT(*) AS "Count"
FROM (
    SELECT "v"."Total", rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', "v"."SaleDate", 'start of day'), '0'), '.') AS "Key"
    FROM "ventas" AS "v"
    WHERE "v"."SaleDate" >= @__start_0 AND "v"."SaleDate" <= @__end_1
) AS "v0"
GROUP BY "v0"."Key"
ORDER BY "v0"."Key"
2025-11-05 22:56:07.158 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name", COALESCE(ef_sum("v"."Quantity"), '0.0') AS "Quantity", COALESCE(ef_sum("v"."LineTotal"), '0.0') AS "Revenue", (
    SELECT COALESCE(ef_sum(ef_multiply("v1"."Quantity", "p1"."Cost")), '0.0')
    FROM "venta_detalle" AS "v1"
    INNER JOIN "ventas" AS "v2" ON "v1"."SaleId" = "v2"."Id"
    INNER JOIN "productos" AS "p0" ON "v1"."ProductId" = "p0"."Id"
    INNER JOIN "productos" AS "p1" ON "v1"."ProductId" = "p1"."Id"
    WHERE "v2"."SaleDate" >= @__start_0 AND "v2"."SaleDate" <= @__end_1 AND "v"."ProductId" = "v1"."ProductId" AND "p"."Name" = "p0"."Name") AS "Cost", COALESCE(ef_sum(ef_multiply("v"."Quantity", "v"."UnitPrice")), '0.0') AS "DiscountBase", COALESCE(ef_sum("v"."Discount"), '0.0') AS "Discount"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__start_0 AND "v0"."SaleDate" <= @__end_1
GROUP BY "v"."ProductId", "p"."Name"
2025-11-05 22:56:07.163 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__start_0='?' (DbType = DateTime), @__end_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "v"."LineTotal", "v"."Quantity", "v"."UnitPrice", "v"."Discount", ef_multiply("v"."Quantity", "p"."Cost") AS "Cost"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__start_0 AND "v0"."SaleDate" <= @__end_1
2025-11-05 22:56:14.674 -06:00 [INF] Application is shutting down...
2025-11-05 23:50:58.871 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 23:50:58.890 -06:00 [INF] Hosting environment: Production
2025-11-05 23:50:58.891 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia
2025-11-05 23:50:59.314 -06:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 23:50:59.442 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 23:50:59.447 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 23:50:59.449 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 23:50:59.451 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 23:50:59.452 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 23:50:59.453 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 23:51:01.244 -06:00 [INF] Application is shutting down...
2025-11-05 23:51:19.764 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-05 23:51:19.783 -06:00 [INF] Hosting environment: Production
2025-11-05 23:51:19.783 -06:00 [INF] Content root path: C:\Users\carlo\OneDrive\Documentos\farmacia\Farmacia.UI.Wpf\bin\Debug\net8.0-windows
2025-11-05 23:51:20.185 -06:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-05 23:51:20.316 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "users" AS "u")
2025-11-05 23:51:20.322 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "proveedores" AS "p")
2025-11-05 23:51:20.323 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "productos" AS "p")
2025-11-05 23:51:20.325 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "pacientes" AS "p")
2025-11-05 23:51:20.326 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "secuencias" AS "s")
2025-11-05 23:51:20.328 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "configuracion" AS "c")
2025-11-05 23:51:48.381 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalized_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."FullName", "u"."IsActive", "u"."MustChangePassword", "u"."PasswordHash", "u"."Role", "u"."UpdatedAt", "u"."Username"
FROM "users" AS "u"
WHERE lower("u"."Username") = @__normalized_0 AND "u"."IsActive"
LIMIT 1
2025-11-05 23:51:48.499 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(ef_sum("v"."Total"), '0.0')
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 23:51:48.505 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "ventas" AS "v"
WHERE "v"."SaleDate" >= @__startOfDay_0 AND "v"."SaleDate" < @__endOfDay_1
2025-11-05 23:51:48.522 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__startOfDay_0='?' (DbType = DateTime), @__endOfDay_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "v"."Quantity", "v"."LineTotal"
FROM "venta_detalle" AS "v"
INNER JOIN "ventas" AS "v0" ON "v"."SaleId" = "v0"."Id"
INNER JOIN "productos" AS "p" ON "v"."ProductId" = "p"."Id"
WHERE "v0"."SaleDate" >= @__startOfDay_0 AND "v0"."SaleDate" < @__endOfDay_1
2025-11-05 23:51:48.542 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__FromDateTime_0='?' (DbType = Date), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Name" AS "ProductName", "l0"."LotCode", "l0"."ExpirationDate"
FROM (
    SELECT "l"."ExpirationDate", "l"."LotCode", "l"."ProductId"
    FROM "lotes" AS "l"
    WHERE "l"."ExpirationDate" IS NOT NULL AND ef_compare("l"."RemainingQuantity", '0.0') > 0 AND "l"."ExpirationDate" <= @__FromDateTime_0
    ORDER BY "l"."ExpirationDate"
    LIMIT @__p_1
) AS "l0"
INNER JOIN "productos" AS "p" ON "l0"."ProductId" = "p"."Id"
ORDER BY "l0"."ExpirationDate"
2025-11-05 23:51:50.571 -06:00 [INF] Application is shutting down...
